<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="692px" preserveAspectRatio="none" style="width:649px;height:692px;" version="1.1" viewBox="0 0 649 692" width="649px" zoomAndPan="magnify"><defs><filter height="300%" id="ftciagghkrxj2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="215.5938" cy="16" fill="#000000" filter="url(#ftciagghkrxj2)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><polygon fill="#FEFECE" filter="url(#ftciagghkrxj2)" points="215.5938,103.5,227.5938,115.5,215.5938,127.5,203.5938,115.5,215.5938,103.5" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#ftciagghkrxj2)" points="403.5938,197,415.5938,209,403.5938,221,391.5938,209,403.5938,197" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="126" x="340.5938" y="280"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="350.5938" y="301.1387">Duplicate Content</text><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="137" x="201.0938" y="388"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="211.0938" y="409.1387">Update Replica Info</text><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="161" x="246.0938" y="496"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="256.0938" y="517.1387">Store System Metadata</text><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="47.9375" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="126" x="279.5938" y="571"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="296.0938" y="592.1387">Notify watchers</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="289.5938" y="606.1074">Index, Replication</text><ellipse cx="409.5938" cy="670" fill="none" filter="url(#ftciagghkrxj2)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="410.0938" cy="670.5" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="171" x="397.0938" y="334"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="151" x="407.0938" y="355.1387">Error: Duplicate Identifier</text><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="76" x="416.5938" y="442"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="426.5938" y="463.1387">Notify MN</text><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="95" x="272.0938" y="98.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="282.0938" y="119.6387">New content</text><path d="M387.0938,80 L387.0938,111.5 L367.3358,115.5 L387.0938,119.5 L387.0938,150.5313 A0,0 0 0 0 387.0938,150.5313 L640.0938,150.5313 A0,0 0 0 0 640.0938,150.5313 L640.0938,90 L630.0938,80 L387.0938,80 A0,0 0 0 0 387.0938,80 " fill="#FBFB77" filter="url(#ftciagghkrxj2)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M630.0938,80 L630.0938,90 L640.0938,90 L630.0938,80 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="393.0938" y="97.0669">The content is unknown to DataONE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="393.0938" y="112.1997">so needs to be examined, its</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="393.0938" y="127.3325">location recorded, and optionally</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="393.0938" y="142.4653">retrieved and stored on the CN.</text><polygon fill="#FEFECE" filter="url(#ftciagghkrxj2)" points="150.5938,197,162.5938,209,150.5938,221,138.5938,209,150.5938,197" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="137" x="205.0938" y="192"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="215.0938" y="213.1387">Get object from MN</text><rect fill="#FEFECE" filter="url(#ftciagghkrxj2)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="134" x="186.5938" y="280"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114" x="196.5938" y="301.1387">Store object on CN</text><!--MD5=[e3010eb6f34d52f9cd098dd600245d35]
link start to #9830--><path d="M215.5938,26.349 C215.5938,42.887 215.5938,77.497 215.5938,98.087 " fill="none" id="start-to-#9830" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="215.5938,103.249,219.5938,94.249,215.5938,98.249,211.5938,94.249,215.5938,103.249" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="216.5938" y="57.2104">processObject()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="6" y="97.7782">CNRead.getSystemMetadata(PID)</text><!--MD5=[cf804aa1deef36ae005ada8f5806b59f]
link #9830 to #9833--><path d="M221.4898,121.73 C229.9188,129.01 246.1088,142.285 261.5938,151 C306.1168,176.057 363.8858,195.635 389.8708,203.825 " fill="none" id="#9830-to-#9833" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="394.9168,205.398,387.5135,198.9024,390.143,203.911,385.1344,206.5404,394.9168,205.398" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="423.6701" y="197.2837">Duplicate Object?</text><!--MD5=[2072bfc56b933c4bafd43dcd9d08e050]
link #9833 to Duplicate Content--><path d="M403.5938,221.243 C403.5938,234.777 403.5938,257.793 403.5938,274.72 " fill="none" id="#9833-to-Duplicate Content" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="403.5938,279.761,407.5938,270.761,403.5938,274.761,399.5938,270.761,403.5938,279.761" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="404.5938" y="257.2104">Yes</text><!--MD5=[98b192719a0c0ea1b81076f9301151a5]
link Duplicate Content to Update Replica Info--><path d="M383.2418,314.099 C359.3348,333.011 319.6968,364.366 294.1168,384.601 " fill="none" id="Duplicate Content-to-Update Replica Info" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="290.1368,387.749,299.6771,385.3034,294.0585,384.6474,294.7145,379.0287,290.1368,387.749" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3428fe606988c8dc0eaf59d545cdcbe6]
link Update Replica Info to Store System Metadata--><path d="M278.2508,422.099 C288.2108,440.621 304.5898,471.081 315.4828,491.338 " fill="none" id="Update Replica Info-to-Store System Metadata" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="317.8548,495.749,317.1173,485.9278,315.4877,491.3448,310.0706,489.7151,317.8548,495.749" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[19d8787946793a6bc944ac785c2777ae]
link Store System Metadata to Notify watchers\nIndex, Replication--><path d="M329.8318,530.189 C331.8768,540.416 334.5758,553.908 336.9638,565.851 " fill="none" id="Store System Metadata-to-Notify watchers\nIndex, Replication" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="337.9658,570.861,340.1241,561.2516,336.9857,565.958,332.2793,562.8196,337.9658,570.861" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1615271006ed43f591b5efc4716875a3]
link Notify watchers\nIndex, Replication to end--><path d="M363.7928,619.0977 C375.8418,632.2255 390.3558,648.0394 399.7688,658.2954 " fill="none" id="Notify watchers\nIndex, Replication-to-end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="403.2298,662.0665,400.0917,652.7309,399.8491,658.3826,394.1974,658.14,403.2298,662.0665" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[28e28c4b331b4158a73b0c793143c0e4]
link #9833 to Error: Duplicate Identifier--><path d="M410.8278,214.321 C426.1298,223.913 461.5988,248.634 476.5938,280 C483.8558,295.191 485.0308,314.354 484.5718,328.787 " fill="none" id="#9833-to-Error: Duplicate Identifier" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="484.3368,333.875,488.7464,325.0685,484.5667,328.8803,480.7549,324.7006,484.3368,333.875" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="15" x="463.5938" y="257.2104">No</text><!--MD5=[317207436bb11eec99725fd56b366daf]
link Error: Duplicate Identifier to Notify MN--><path d="M478.3408,368.099 C473.4898,386.466 465.5378,416.57 460.1868,436.825 " fill="none" id="Error: Duplicate Identifier-to-Notify MN" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="458.8868,441.749,465.0529,434.0692,460.1639,436.9149,457.3182,432.0258,458.8868,441.749" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e937bb380fd0948c9bea1247678c0008]
link Notify MN to end--><path d="M451.1378,476.053 C442.6238,515.593 420.7498,617.1863 412.6608,654.7553 " fill="none" id="Notify MN-to-end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="411.5708,659.8187,417.376,651.8626,412.6235,654.9308,409.5553,650.1783,411.5708,659.8187" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[cd4d8bb2bc1c88ec484e4bb944c458ae]
link #9830 to New content--><path d="M227.9328,115.5 C237.7078,115.5 252.0888,115.5 266.5738,115.5 " fill="none" id="#9830-to-New content" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="271.9077,115.5,262.9077,111.5,266.9077,115.5,262.9077,119.5,271.9077,115.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="238.3438" y="109.7104">FAIL</text><!--MD5=[b31ce2379cd26ea9b7a0c3f9d6ad6a9c]
link New content to #9856--><path d="M289.7688,132.648 C251.9458,153.126 188.5088,187.472 162.3838,201.617 " fill="none" id="New content-to-#9856" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="157.9538,204.015,167.7726,203.2474,162.3506,201.6344,163.9636,196.2124,157.9538,204.015" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="23.8468" y="179.132">Science Metadata</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="28.8468" y="191.9367">or Resource Map?</text><!--MD5=[0ba686ee8d5564735e489a3dd592b7d9]
link #9856 to Get object from MN--><path d="M162.8368,209 C171.9828,209 185.3238,209 199.6018,209 " fill="none" id="#9856-to-Get object from MN" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="204.8988,209,195.8988,205,199.8988,209,195.8988,213,204.8988,209" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="173.3438" y="203.2104">yes</text><!--MD5=[2bc8cac4b52b1759c17b7cd8caf231dd]
link Get object from MN to Store object on CN--><path d="M269.8318,226.176 C266.6198,239.99 261.9768,259.953 258.4778,274.999 " fill="none" id="Get object from MN-to-Store object on CN" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="257.3388,279.897,263.2739,272.0373,258.4716,275.027,255.4819,270.2248,257.3388,279.897" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[99639cd548cf1eaa36df1ae1d951dee7]
link Store object on CN to Update Replica Info--><path d="M256.0238,314.099 C258.7848,332.388 263.3017,362.315 266.3588,382.567 " fill="none" id="Store object on CN-to-Update Replica Info" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="267.1408,387.749,269.7511,378.2524,266.3937,382.8051,261.8409,379.4477,267.1408,387.749" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[25902c112dfe31e9e631c6469bd7d02e]
link #9856 to Update Replica Info--><path d="M149.1648,219.877 C146.8558,239.221 144.0878,282.922 160.5938,314 C177.1878,345.245 209.6578,369.84 234.8618,385.367 " fill="none" id="#9856-to-Update Replica Info" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="239.1578,387.97,233.5331,379.8852,234.8814,385.3791,229.3876,386.7274,239.1578,387.97" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="161.5938" y="301.2104">no</text><!--MD5=[6dc95dd9b7d80865984d7edb6e8b087a]
@startuml
(*) - -> [processObject()] if "CNRead.getSystemMetadata(PID)" then
  if "Duplicate Object?" then
    - ->[Yes] "Duplicate Content"
    - -> "Update Replica Info"
    - -> "Store System Metadata"
    - -> "Notify watchers\nIndex, Replication"
    - -> (*)
  else
    - ->[No] "Error: Duplicate Identifier"
    - -> "Notify MN"
    - -> (*)
  endif

else
  ->[FAIL] "New content"
  note right
    The content is unknown to DataONE
    so needs to be examined, its
    location recorded, and optionally
    retrieved and stored on the CN.
  end note
  if "Science Metadata \n or Resource Map?" then
    ->[yes] "Get object from MN"
    - -> "Store object on CN"
    - -> "Update Replica Info"
  else
    - ->[no] "Update Replica Info"
  endif
endif
@enduml

PlantUML version 1.2020.21beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>