<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="766px" preserveAspectRatio="none" style="width:1553px;height:766px;" version="1.1" viewBox="0 0 1553 766" width="1553px" zoomAndPan="magnify"><defs><filter height="300%" id="fgswfl0u2abyg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="340" x="600.0768" y="16.708">CN Replication Auditing Components</text><!--MD5=[ee5a7cb2f297ac0a2c70ef129dc1cf80]
cluster CN Audit Process(D1 Processing)--><polygon fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" points="584.1859,264.9531,594.1859,254.9531,1277.1859,254.9531,1277.1859,480.9531,1267.1859,490.9531,584.1859,490.9531,584.1859,264.9531" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1267.1859" x2="1277.1859" y1="264.9531" y2="254.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="584.1859" x2="1267.1859" y1="264.9531" y2="264.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="1267.1859" x2="1267.1859" y1="264.9531" y2="490.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="265" x="794.1859" y="280.9482">CN Audit Process(D1 Processing)</text><!--MD5=[324b1ab372917d0812e304158c3fbfdf]
cluster CN Replication Auditor--><rect fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" height="164" style="stroke:#000000;stroke-width:1.5;" width="645" x="608.1859" y="302.9531"/><path d="M802.1859,302.9531 L802.1859,312.25 L792.1859,322.25 L608.1859,322.25 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="611.1859" y="316.9482">CN Replication Auditor</text><!--MD5=[689d5ac2d4369f7cf0c7517fa92f8965]
cluster CN Common--><rect fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" height="97" style="stroke:#000000;stroke-width:1.5;" width="182" x="811.1859" y="345.9531"/><path d="M917.1859,345.9531 L917.1859,355.25 L907.1859,365.25 L811.1859,365.25 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="814.1859" y="359.9482">CN Common</text><!--MD5=[4179b85e5e49fc4f472e1ae8648ca779]
cluster CN Replication--><rect fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" height="97" style="stroke:#000000;stroke-width:1.5;" width="212" x="1017.1859" y="345.9531"/><path d="M1145.1859,345.9531 L1145.1859,355.25 L1135.1859,365.25 L1017.1859,365.25 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1020.1859" y="359.9482">CN Replication</text><!--MD5=[7bf73f26a24f99ff2e66252a2d11052e]
cluster psql--><path d="M755.1859,36.9531 C755.1859,26.9531 887.1859,26.9531 887.1859,26.9531 C887.1859,26.9531 1019.1859,26.9531 1019.1859,36.9531 L1019.1859,195.9531 C1019.1859,205.9531 887.1859,205.9531 887.1859,205.9531 C887.1859,205.9531 755.1859,205.9531 755.1859,195.9531 L755.1859,36.9531 " fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" style="stroke:#000000;stroke-width:1.5;"/><path d="M755.1859,36.9531 C755.1859,46.9531 887.1859,46.9531 887.1859,46.9531 C887.1859,46.9531 1019.1859,46.9531 1019.1859,36.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="870.1859" y="61.9482">psql</text><!--MD5=[fc78be9fac335d2f599f82d24effcb8b]
cluster metacat--><rect fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" height="97" style="stroke:#000000;stroke-width:1.5;" width="216" x="779.1859" y="84.9531"/><path d="M858.1859,84.9531 L858.1859,94.25 L848.1859,104.25 L779.1859,104.25 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="69" x="782.1859" y="98.9482">metacat</text><!--MD5=[502b5bfb7bcb5a49c52679ea007be64f]
cluster CN Service--><polygon fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" points="1043.1859,89.9531,1053.1859,79.9531,1209.1859,79.9531,1209.1859,171.9531,1199.1859,181.9531,1043.1859,181.9531,1043.1859,89.9531" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1199.1859" x2="1209.1859" y1="89.9531" y2="79.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="1043.1859" x2="1199.1859" y1="89.9531" y2="89.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="1199.1859" x2="1199.1859" y1="89.9531" y2="181.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="1080.1859" y="105.9482">CN Service</text><!--MD5=[0fcd8de93d9490439439cf12b934e6d6]
cluster hazelcast--><path d="M1252.1543,51.3145 C1258.699,43.1675 1265.6014,40.7741 1272.3038,51.1429 C1278.2425,43.6783 1287.0829,42.6538 1291.6862,52.6272 C1295.5367,43.2726 1303.5459,44.1857 1309.0545,50.8269 C1316.4511,40.7743 1322.6312,41.5345 1329.6606,51.2104 C1333.6413,40.7267 1341.455,41.1569 1348.54,47.7854 C1356.4573,37.5873 1364.3454,38.4906 1369.3655,50.5021 C1375.0774,40.0798 1381.0309,39.4627 1388.363,48.9566 C1393.555,42.2479 1400.8404,41.7988 1405.1827,49.9203 C1412.5153,40.3662 1419.4246,41.2321 1426.6454,50.051 C1433.027,42.3349 1439.2019,40.8462 1445.0857,50.5771 C1452.0099,43.5033 1457.9712,43.6299 1463.6309,52.0871 C1468.7361,43.5958 1476.695,42.33 1482.464,51.3743 C1486.5175,41.2088 1496.1831,41.299 1501.8454,49.6944 C1511.8662,38.6684 1523.2903,44.0858 1526.1859,56.9531 C1528.4357,56.5534 1529.7453,57.5007 1529.017,59.9318 C1540.0993,65.9854 1540.2722,73.624 1531.1836,81.6866 C1542.8968,86.3535 1542.9996,95.5449 1534.2072,103.1065 C1544.8467,109.2896 1545.9841,118.8367 1534.6177,125.4246 C1545.4405,131.1533 1546.1536,142.0277 1534.562,147.7004 C1544.4902,157.4437 1540.9431,164.5338 1529.834,169.7705 C1538.8851,181.8952 1534.7073,195.1126 1519.1859,197.9531 C1519.945,197.8989 1520.1527,198.3017 1519.9312,198.9678 C1515.6921,209.5436 1508.7273,208.6592 1501.6537,201.9683 C1495.3955,212.3648 1488.5789,212.636 1482.1689,202.1097 C1477.5987,209.7089 1470.2982,211.2533 1465.2342,202.625 C1457.6401,212.1363 1449.3433,213.8061 1443.1432,201.2307 C1438.3156,210.8551 1432.1005,209.5876 1426.1676,202.3428 C1421.2585,212.3456 1411.7312,214.9546 1404.8547,204.3807 C1399.6183,212.4763 1391.7967,212.4441 1387.9786,203.015 C1382.5969,214.4786 1372.4628,213.9831 1366.3285,203.7665 C1360.9055,211.2389 1355.8098,210.8545 1350.5274,203.6156 C1345.2983,212.0062 1336.2272,211.9299 1331.0313,203.577 C1321.9468,214.1029 1314.864,210.3792 1309.4604,199.8126 C1305.4461,208.2806 1296.7077,210.3444 1290.9137,201.7468 C1283.4882,212.2818 1275.8375,211.5004 1270.5226,199.8104 C1259.4871,208.4764 1247.4996,205.2475 1244.1859,190.9531 C1245.3975,190.3089 1246.3901,191.011 1246.3274,192.3377 C1236.6902,186.6591 1235.5518,176.8933 1244.6519,169.8205 C1233.8809,162.5312 1232.3218,154.9335 1244.514,147.5024 C1234.2043,141.3295 1234.1005,133.2437 1243.5922,126.2133 C1233.0923,119.0028 1233.4259,112.3992 1243.3618,104.967 C1231.5853,96.7887 1231.4085,88.9888 1243.2974,80.7477 C1229.146,68.1296 1233.0075,54.2895 1251.1859,49.9531 C1252.2119,49.8624 1252.5988,50.3593 1252.1543,51.3145 " fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="1345.6859" y="67.9482">hazelcast</text><!--MD5=[25a55d23fb467e108af3f86838a11188]
cluster d1-processing--><rect fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" height="97" style="stroke:#000000;stroke-width:1.5;" width="250" x="1260.1859" y="84.9531"/><path d="M1384.1859,84.9531 L1384.1859,94.25 L1374.1859,104.25 L1260.1859,104.25 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="1263.1859" y="98.9482">d1-processing</text><!--MD5=[6b3c4a27dbe9e1a3b6bc49123876e7f6]
cluster auditCloud--><path d="M34.1455,306.4064 C47.4125,286.5233 63.2634,289.2504 72.9765,309.8181 C81.9567,291.2496 96.5289,291.9952 106.8179,308.5573 C116.2242,289.0322 131.5808,292.0421 142.013,307.5259 C150.0869,285.301 168.7227,285.2871 181.0597,303.3992 C192.0628,284.8098 206.7793,285.4212 216.0553,304.9834 C230.4895,287.9233 243.4681,285.3577 257.4907,305.4424 C267.6336,285.6087 280.1143,286.5801 293.1611,302.5492 C307.0873,287.7148 318.8988,286.7393 330.5641,305.0969 C343.6679,287.3953 356.2853,287.9505 367.6371,306.8705 C376.7136,291.6324 393.2554,290.4906 401.373,307.8624 C410.7593,289.7271 428.0755,287.967 439.7451,305.3991 C453.1774,285.618 469.9962,289.1694 478.4044,310.1626 C489.322,293.9902 499.5525,289.338 513.4057,307.138 C528.1475,287.6009 543.5881,291.5172 552.1859,312.9531 C556.2722,310.8962 557.7458,313.0055 558.28,316.7102 C574.9829,326.1097 576.2981,339.2207 558.7975,349.1657 C574.727,359.4525 574.1302,377.6039 558.5833,387.7158 C573.4791,397.0872 575.1699,408.9655 559.1192,418.8692 C578.0272,427.7139 575.5436,445.8304 559.693,455.2237 C574.4579,463.1435 579.435,474.889 565.2424,487.7494 C582.2557,497.1272 582.3665,509.3054 566.8704,520.3087 C582.5494,531.203 584.6205,548.5718 565.5715,558.2782 C577.7217,571.0213 576.8115,581.5434 561.1763,590.496 C575.372,598.5681 576.4349,613.7664 563.3537,623.6311 C576.4057,636.9585 573.7556,647.3971 557.2148,654.9181 C573.4793,669.1136 576.3771,682.8922 554.3172,694.2655 C565.8988,708.47 565.6056,723.9367 545.1859,729.9531 C547.4228,729.8146 548.7041,730.9798 547.9488,733.3066 C536.1285,751.6112 524.7405,746.2727 513.9149,732.2591 C505.0644,753.0538 486.3204,752.4491 474.678,735.1335 C462.9028,755.2828 444.9924,751.0037 436.1277,732.2495 C427.7172,749.1543 417.3447,750.9796 402.864,739.3178 C391.1455,757.3473 377.2643,754.7617 366.2125,738.603 C351.1224,759.1488 339.1149,757.1329 326.8557,735.9341 C318.33,750.9259 302.226,752.9478 292.6943,737.0464 C280.0288,751.7926 265.2343,755.7573 255.001,734.5 C243.824,755.5568 231.3114,755.9686 216.9337,737.5896 C207.6163,753.3497 190.7838,757.1145 179.7947,739.4469 C166.6911,753.9289 153.075,757.2331 142.5551,736.6992 C131.3873,750.2863 119.9796,754.7099 108.8881,736.6181 C98.0578,755.4646 79.2524,751.9785 69.1878,735.7513 C50.632,754.401 30.8461,746.1312 24.1859,722.9531 C26.6136,721.6777 28.8759,722.9581 28.6302,725.8229 C14.5306,718.6476 13.8813,705.4553 25.174,695.3958 C8.6838,682.6067 9.4309,671.0913 27.7178,660.864 C7.4541,649.7402 8.4051,635.2545 26.4276,622.8319 C9.9843,615.1825 12.0071,599.4526 25.0547,590.549 C8.1611,578.8065 9.9563,563.9698 26.911,553.9439 C12.2574,546.1123 11.2617,536.0391 22.9802,524.6668 C7.0621,514.0812 7.1528,496.189 25.5316,487.9892 C6.3769,475.8937 10.8193,461.3366 27.657,451.3276 C8.0959,442.4581 8.2941,427.0716 26.0034,416.4358 C11.4593,405.9811 8.1682,394.8388 24.4556,382.9585 C6.2658,370.7404 7.9948,359.4828 25.6379,348.494 C6,333.2588 7.4521,315.5319 31.1859,305.9531 C32.2883,304.8154 33.4267,305.0394 34.1455,306.4064 " fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="211.1859" y="323.9482">CN Audit Log Cloud</text><!--MD5=[b8a8a7ea6cc70f428d677ccf7c604b27]
cluster Zookeeper--><polygon fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" points="40.1859,350.9531,50.1859,340.9531,536.1859,340.9531,536.1859,432.9531,526.1859,442.9531,40.1859,442.9531,40.1859,350.9531" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="526.1859" x2="536.1859" y1="350.9531" y2="340.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="40.1859" x2="526.1859" y1="350.9531" y2="350.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="526.1859" x2="526.1859" y1="350.9531" y2="442.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="242.1859" y="366.9482">Zookeeper</text><!--MD5=[856da3de74af56d8cdae067e9dce5085]
cluster jetty--><polygon fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" points="241.1859,549.9531,251.1859,539.9531,465.1859,539.9531,465.1859,703.9531,455.1859,713.9531,241.1859,713.9531,241.1859,549.9531" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="455.1859" x2="465.1859" y1="549.9531" y2="539.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="241.1859" x2="455.1859" y1="549.9531" y2="549.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="455.1859" x2="455.1859" y1="549.9531" y2="713.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="329.6859" y="565.9482">jetty</text><!--MD5=[799f6c25fb56d5c4362d510ffa93f595]
cluster Solr 4--><polygon fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" points="265.1859,597.9531,275.1859,587.9531,441.1859,587.9531,441.1859,679.9531,431.1859,689.9531,265.1859,689.9531,265.1859,597.9531" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="431.1859" x2="441.1859" y1="597.9531" y2="587.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.1859" x2="431.1859" y1="597.9531" y2="597.9531"/><line style="stroke:#000000;stroke-width:1.5;" x1="431.1859" x2="431.1859" y1="597.9531" y2="689.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="325.6859" y="613.9482">Solr 4</text><!--MD5=[a483eed62ecebc8a81a2275e368e73c5]
entity CNAuditLogClient--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="167" x="624.6859" y="380.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="771.6859" y="385.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="769.6859" y="387.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="769.6859" y="391.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="639.6859" y="413.9482">CNAuditLogClient</text><!--MD5=[2ad9e1245720698f5adfecffabcbda62]
entity ReplicationDao--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="150" x="827.1859" y="380.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="957.1859" y="385.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="955.1859" y="387.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="955.1859" y="391.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="842.1859" y="413.9482">ReplicationDao</text><!--MD5=[f4879a58cb2e237e5924d69246c3b0c8]
entity Replication Service--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="179" x="1033.6859" y="380.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1192.6859" y="385.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1190.6859" y="387.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1190.6859" y="391.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="1048.6859" y="413.9482">Replication Service</text><!--MD5=[58d70edfabcd7c7d7bf32d3f71e59cf9]
entity smreplicationstatus--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="183" x="795.6859" y="119.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="958.6859" y="124.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="956.6859" y="126.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="956.6859" y="130.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="810.6859" y="152.9482">smreplicationstatus</text><!--MD5=[55159022b11cb7ac09c0f1af1e82a1b5]
entity REST Service--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="134" x="1059.1859" y="119.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1173.1859" y="124.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1171.1859" y="126.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1171.1859" y="130.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="1074.1859" y="152.9482">REST Service</text><!--MD5=[5cce93d06a99e1225a3aaeaae6b88c5a]
entity Replication Event Queue--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="217" x="1276.6859" y="119.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1473.6859" y="124.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1471.6859" y="126.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1471.6859" y="130.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="1291.6859" y="152.9482">Replication Event Queue</text><!--MD5=[1a2c1d6c7dc4f26f2f14471ef87955af]
entity index config--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="128" x="56.1859" y="380.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="164.1859" y="385.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="162.1859" y="387.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="162.1859" y="391.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="71.1859" y="413.9482">index config</text><!--MD5=[192b9064fe00c34ca6f47f1320970a75]
entity leader election--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="148" x="219.1859" y="380.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="347.1859" y="385.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="345.1859" y="387.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="345.1859" y="391.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="234.1859" y="413.9482">leader election</text><!--MD5=[1472a46d72317db75a4cfa4a4d1e8b42]
entity replication--><rect fill="#FEFECE" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="118" x="402.1859" y="380.9531"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="500.1859" y="385.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="498.1859" y="387.9531"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="498.1859" y="391.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="417.1859" y="413.9482">replication</text><!--MD5=[f7ed137d584b424ef82d749c7690a54a]
entity cn-audit-index--><rect fill="#FFFFFF" filter="url(#fgswfl0u2abyg)" height="46.2969" style="stroke:#000000;stroke-width:1.5;" width="144" x="281.1859" y="627.9531"/><path d="M329.1859,627.9531 L329.1859,632.9531 L322.1859,639.9531 L281.1859,639.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="296.1859" y="660.9482">cn-audit-index</text><path d="M255.6859,122.9531 L255.6859,163.2188 L738.6859,163.2188 L738.6859,132.9531 L728.6859,122.9531 L255.6859,122.9531 " fill="#FBFB77" filter="url(#fgswfl0u2abyg)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M728.6859,122.9531 L728.6859,132.9531 L738.6859,132.9531 L728.6859,122.9531 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="462" x="261.6859" y="140.02">Each CN will be running its own instance of the zookeeper and jetty/solr.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="265.6859" y="155.1528">This forms the cloud cluster.</text><!--MD5=[943a5377d4ab4445ddb761451880e8f4]
link CNAuditLogClient to cn-audit-index--><path d="M676.0559,427.1271 C610.0039,472.7131 459.3389,576.6931 389.7099,624.7461 " fill="none" id="CNAuditLogClient-to-cn-audit-index" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="385.2429,627.8291,394.9219,626.0083,389.3577,624.9887,390.3773,619.4245,385.2429,627.8291" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="553.1859" y="520.02">add/remove log entries</text><!--MD5=[66e92c00354a76e901a080b71474cced]
link smreplicationstatus to ReplicationDao--><path d="M888.4649,166.0351 C891.2049,213.3431 897.6339,324.3471 900.6159,375.8371 " fill="none" id="smreplicationstatus-to-ReplicationDao" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="900.9099,380.9271,904.3837,371.7113,900.6213,375.9355,896.3971,372.173,900.9099,380.9271" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="894.1859" y="235.02">select audit candidates</text><!--MD5=[dba793219bf6e0169776be891e37aabf]
reverse link REST Service to Replication Service--><path d="M1123.5559,171.4311 C1122.2559,186.3601 1120.8359,205.1521 1120.1859,221.9531 C1117.9859,279.2671 1120.4459,346.8501 1122.0459,380.9331 " fill="none" id="REST Service-backto-Replication Service" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1124.0259,166.1171,1119.2477,174.7293,1123.5849,171.0976,1127.2165,175.4348,1124.0259,166.1171" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="1121.1859" y="235.02">update replica status/verified date</text><!--MD5=[6ed82c86c4fc4dcdc3f96c17bb6ee195]
reverse link Replication Event Queue to Replication Service--><path d="M1378.3759,171.0541 C1372.3259,191.2631 1361.9659,218.7471 1346.1859,238.9531 C1296.3359,302.7691 1215.4959,353.6271 1166.0659,380.9381 " fill="none" id="Replication Event Queue-backto-Replication Service" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1379.8159,166.0821,1373.4621,173.6074,1378.4198,170.8833,1381.1439,175.841,1379.8159,166.0821" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="1357.1859" y="235.02">submit pids to replication</text><!--MD5=[70734461a6dade487e4bfda5a5295302]
link index config to cn-audit-index--><path d="M119.7469,427.2131 C120.3189,452.8111 124.6769,495.0181 145.1859,523.9531 C179.5299,572.4061 238.9339,605.6551 285.4869,625.7781 " fill="none" id="index config-to-cn-audit-index" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="290.2369,627.8051,283.5297,620.5931,285.6383,625.8423,280.3891,627.9508,290.2369,627.8051" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="146.1859" y="520.02">aquire cloud config</text><!--MD5=[2d103ecaf12e6ebfc98e32665df8cec3]
link leader election to cn-audit-index--><path d="M285.5929,427.2581 C278.4969,451.4541 270.2339,491.0331 279.1859,523.9531 C289.4429,561.6731 314.1619,599.6331 332.2169,623.8791 " fill="none" id="leader election-to-cn-audit-index" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="335.2799,627.9471,333.0623,618.3512,332.2726,623.9526,326.6711,623.1629,335.2799,627.9471" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="280.1859" y="520.02">coordinate leader</text><!--MD5=[65d8fb84a2ec70eb0b0c9e264f3ffeb8]
link replication to cn-audit-index--><path d="M451.4109,427.1271 C431.5819,472.1101 386.6879,573.9531 365.1509,622.8101 " fill="none" id="replication-to-cn-audit-index" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="363.0159,627.6521,370.3064,621.0304,365.0328,623.077,362.9861,617.8033,363.0159,627.6521" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="415.1859" y="520.02">coordinate cloud</text><!--MD5=[e67960460dd57f4d57866726df6e07cf]
@startuml
title CN Replication Auditing Components

node "CN Audit Process(D1 Processing)" {
  frame "CN Replication Auditor" {
    frame "CN Common" {
      [ReplicationDao]
      }
      frame "CN Replication" {
        [Replication Service]
    }
      [CNAuditLogClient] - -> [cn-audit-index] : add/remove log entries
    }
}

database "psql" {
  frame "metacat" {
    [smreplicationstatus] - -> [ReplicationDao] : select audit candidates
  }
}

node "CN Service" {
  [REST Service] <- - [Replication Service] : update replica status/verified date
}

cloud "hazelcast" {
  frame "d1-processing" {
    [Replication Event Queue] <- - [Replication Service] : submit pids to replication
  }
}

cloud "CN Audit Log Cloud" as auditCloud {

  node "Zookeeper" {
    [index config] - -> [cn-audit-index] : aquire cloud config
    [leader election] - -> [cn-audit-index] : coordinate leader
    [replication] - -> [cn-audit-index] : coordinate cloud
  }
  node "jetty" {
    node "Solr 4" {
      frame "cn-audit-index"{
      }
    }
  }
}

note "Each CN will be running its own instance of the zookeeper and jetty/solr.\n This forms the cloud cluster." as N1
@enduml

PlantUML version 1.2020.21beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>