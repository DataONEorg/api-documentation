
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coordinating Node APIs &#8212; v2.2.2</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dataone.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/mathjax_pre.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script src="../_static/sidebar.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Exceptions Raised by MN and CN APIs" href="Exceptions.html" />
    <link rel="prev" title="Member Node APIs" href="MN_APIs.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../_static/small_dataone.css" type= "text/css" rel="stylesheet" />

  </head><body>
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Exceptions.html" title="Exceptions Raised by MN and CN APIs"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="MN_APIs.html" title="Member Node APIs"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html"></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Coordinating Node APIs</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="coordinating-node-apis">
<h1>Coordinating Node APIs<a class="headerlink" href="#coordinating-node-apis" title="Permalink to this headline">¶</a></h1>
<p>The service interfaces described here are exposed through the Coordinating
Node REST interface to support interactions with Member Nodes and DataONE
clients.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#diagnostic-api" id="id45">Diagnostic API</a></p></li>
<li><p><a class="reference internal" href="#core-api" id="id46">Core API</a></p></li>
<li><p><a class="reference internal" href="#read-api" id="id47">Read API</a></p></li>
<li><p><a class="reference internal" href="#view-api" id="id48">View API</a></p></li>
<li><p><a class="reference internal" href="#authorization-api" id="id49">Authorization API</a></p></li>
<li><p><a class="reference internal" href="#identity-api" id="id50">Identity API</a></p></li>
<li><p><a class="reference internal" href="#replication-api" id="id51">Replication API</a></p></li>
<li><p><a class="reference internal" href="#register-api" id="id52">Register API</a></p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="diagnostic-api">
<h2><a class="toc-backref" href="#id45">Diagnostic API</a><a class="headerlink" href="#diagnostic-api" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../glossary.html#term-Coordinating-Node"><span class="xref std std-term">Coordinating Node</span></a> operations to assist clients with diagnosing authentication and content formatting.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNDiagnostic.echoCredentials" title="CNDiagnostic.echoCredentials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">echoCredentials</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/diag/subject</span></code> <br/> Echo the credentials used to make the call.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNDiagnostic.echoIndexedObject" title="CNDiagnostic.echoIndexedObject"><code class="xref py py-obj docutils literal notranslate"><span class="pre">echoIndexedObject</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/diag/object</span></code> <br/> Parse and echo the provided science metadata or resource map document.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNDiagnostic.echoSystemMetadata" title="CNDiagnostic.echoSystemMetadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">echoSystemMetadata</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/diag/sysmeta</span></code> <br/> Parse and echo the provided system metadata.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-CNDiagnostic"></span><dl class="py function">
<dt id="CNDiagnostic.echoCredentials">
<code class="sig-prename descclassname">CNDiagnostic.</code><code class="sig-name descname">echoCredentials</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNDiagnostic.echoCredentials" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/diag/subject</span></code> <br/> Echo the credentials used to make the call.</p>
<p>This method can be used to verify the client certificate is valid and contains the expected information.</p>
<p>v2.0: This method was added to the Version 2.0 API.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/diag/subject</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The subjects and groups parsed from the supplied session information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.SubjectInfo" title="Types.SubjectInfo">Types.SubjectInfo</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The service is not implemented. (errorCode=501, detailCode=4965)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – An internal failure prevented a successful response. (errorCode=500, detailCode=4966)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – The supplied session information could not be parsed. (errorCode=401, detailCode=4967)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<p>Echo credentials in the certificate <code class="docutils literal notranslate"><span class="pre">usercred.pem</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>curl -s --cert usercred.pem https://cn.dataone.org/cn/v2/diag/subject | xml fo

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="nt">&lt;ns2:subjectInfo</span> <span class="na">xmlns:ns2=</span><span class="s">&quot;http://ns.dataone.org/service/types/v1&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;person&gt;</span>
    <span class="nt">&lt;subject&gt;</span>CN=Dave Vieglais A335,O=Google,C=US,DC=cilogon,DC=org<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;givenName&gt;</span>Dave<span class="nt">&lt;/givenName&gt;</span>
    <span class="nt">&lt;familyName&gt;</span>Vieglais<span class="nt">&lt;/familyName&gt;</span>
    <span class="nt">&lt;equivalentIdentity&gt;</span>CN=David Vieglais A2105,O=University of Kansas,C=US,DC=cilogon,DC=org<span class="nt">&lt;/equivalentIdentity&gt;</span>
    <span class="nt">&lt;equivalentIdentity&gt;</span>http://orcid.org/0000-0002-6513-4996<span class="nt">&lt;/equivalentIdentity&gt;</span>
    <span class="nt">&lt;verified&gt;</span>true<span class="nt">&lt;/verified&gt;</span>
  <span class="nt">&lt;/person&gt;</span>
  <span class="nt">&lt;person&gt;</span>
    <span class="nt">&lt;subject&gt;</span>http://orcid.org/0000-0002-6513-4996<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;givenName&gt;</span>David<span class="nt">&lt;/givenName&gt;</span>
    <span class="nt">&lt;familyName&gt;</span>Vieglais<span class="nt">&lt;/familyName&gt;</span>
    <span class="nt">&lt;equivalentIdentity&gt;</span>CN=Dave Vieglais A335,O=Google,C=US,DC=cilogon,DC=org<span class="nt">&lt;/equivalentIdentity&gt;</span>
    <span class="nt">&lt;verified&gt;</span>false<span class="nt">&lt;/verified&gt;</span>
  <span class="nt">&lt;/person&gt;</span>
<span class="nt">&lt;/ns2:subjectInfo&gt;</span>
</pre></div>
</div>
<p>Echo credentials from bearer token:</p>
</dd></dl>

<dl class="py function">
<dt id="CNDiagnostic.echoIndexedObject">
<code class="sig-prename descclassname">CNDiagnostic.</code><code class="sig-name descname">echoIndexedObject</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">queryEngine</span></em>, <em class="sig-param"><span class="n">sysmeta</span></em>, <em class="sig-param"><span class="n">object</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNDiagnostic.echoIndexedObject" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/diag/object</span></code> <br/> Parse and echo the provided science metadata or resource map document.</p>
<p>The response is governed by the type of object provided in the request, and on
success is one or more documents that are the result of parsing for indexing.</p>
<p>Since DataONE supports multiple types of query engine, the query engine to be
used for parsing is specified in the request.</p>
<p>The servce may terminate the POST operation if the size of the object is
beyond a reasonable size.</p>
<p>v2.0: This operation is new to version 2.0.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/diag/object</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>queryEngine</strong> (<em>string</em>) – A valid query engine name as reported by <code class="xref py py-func docutils literal notranslate"><span class="pre">listQueryEngines()</span></code> Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>sysmeta</strong> (<a class="reference internal" href="Types.html#Types.SystemMetadata" title="Types.SystemMetadata"><em>Types.SystemMetadata</em></a>) – A SystemMetadata object that passes the echoSystemMetadata diagnostic. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>object</strong> (<em>bytes</em>) – A document (e.g. science metadata or resource map) that is to be evalauted for indexing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A document representing the parsed object as it would be prior to being added to a search index. For the solr query engine for example, this would be the equivalent of a <em>&lt;add&gt;&lt;doc&gt; .. &lt;/doc&gt; .. &lt;/add&gt;</em> structure with possibly multiple documents.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types11.html#Types.OctetStream" title="Types.OctetStream">Types.OctetStream</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The service is not implemented. (errorCode=501, detailCode=4980)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – An internal failure prevented a successful response. (errorCode=500, detailCode=4981)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied credentials are not authorized for this operation. (errorCode=401, detailCode=4982)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – The supplied session information could not be parsed. (errorCode=401, detailCode=4983)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The structure of the request is invalid. (errorCode=400, detailCode=4984)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidSystemMetadata" title="Exceptions.InvalidSystemMetadata"><strong>Exceptions.InvalidSystemMetadata</strong></a> – The system metadata could not be parsed. (errorCode=400, detailCode=4985)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.UnsupportedType" title="Exceptions.UnsupportedType"><strong>Exceptions.UnsupportedType</strong></a> – The supplied object was not of a supported type. (errorCode=400, detailCode=4986)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.UnsupportedMetadataType" title="Exceptions.UnsupportedMetadataType"><strong>Exceptions.UnsupportedMetadataType</strong></a> – The provided metadata format is not supported by the query engine. (errorCode=400, detailCode=4987)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InsufficientResources" title="Exceptions.InsufficientResources"><strong>Exceptions.InsufficientResources</strong></a> – Insufficient resources could be allocated to support the request. The provided object may be too large to process. (errorCode=413, detailCode=4988)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Example for CNDiagnostic.echoIndexedObject</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNDiagnostic.echoSystemMetadata">
<code class="sig-prename descclassname">CNDiagnostic.</code><code class="sig-name descname">echoSystemMetadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">sysmeta</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNDiagnostic.echoSystemMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/diag/sysmeta</span></code> <br/> Parse and echo the provided system metadata.</p>
<p>On successful parsing, a copy of the system metadata is returned, otherwise an
exception is returned indicating an error condition.</p>
<p>v2.0: This operation is new to version 2.0.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/diag/sysmeta</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>sysmeta</strong> (<a class="reference internal" href="Types.html#Types.SystemMetadata" title="Types.SystemMetadata"><em>Types.SystemMetadata</em></a>) – A SystemMetadata object to be examined. The object is parsed and error conditions reported by an exception response. On successful parsing, the SystemMetadata object is echoed back with a HTTP 200 status. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A copy of the supplied System Metadata.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.SystemMetadata" title="Types.SystemMetadata">Types.SystemMetadata</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4970)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4971)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4972)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4973)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4974)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.IdentifierNotUnique" title="Exceptions.IdentifierNotUnique"><strong>Exceptions.IdentifierNotUnique</strong></a> – (errorCode=409, detailCode=4975)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidSystemMetadata" title="Exceptions.InvalidSystemMetadata"><strong>Exceptions.InvalidSystemMetadata</strong></a> – (errorCode=400, detailCode=4976)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Example for CNDiagnostic.echoSystemMetadata</p>
</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="core-api">
<h2><a class="toc-backref" href="#id46">Core API</a><a class="headerlink" href="#core-api" title="Permalink to this headline">¶</a></h2>
<p>Core operations necessary for basic interaction with <a class="reference internal" href="../glossary.html#term-Coordinating-Node"><span class="xref std std-term">Coordinating Node</span></a>s.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNCore.archive" title="CNCore.archive"><code class="xref py py-obj docutils literal notranslate"><span class="pre">archive</span></code></a>(session, id)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/archive/{id}</span></code> <br/> Hides an object managed by DataONE from search operations, effectively preventing its discovery during normal operations.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNCore.create" title="CNCore.create"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create</span></code></a>(session, pid, object, sysmeta)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/object</span></code> <br/> Used internally within a Coordinating Node to add a new object to the object store.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNCore.delete" title="CNCore.delete"><code class="xref py py-obj docutils literal notranslate"><span class="pre">delete</span></code></a>(session, id)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/object/{id}</span></code> <br/> Deletes an object from the entire DataONE system, including all nodes known to hold a copy of the object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNCore.generateIdentifier" title="CNCore.generateIdentifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generateIdentifier</span></code></a>(session, scheme[, fragment])</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/generate</span></code> <br/> Given a scheme and optional fragment, generates an identifier with that scheme and fragment that is unique.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNCore.getCapabilities" title="CNCore.getCapabilities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getCapabilities</span></code></a>()</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/</span></code> <br/> Returns a document describing the capabilities of the Coordinating Node.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNCore.getFormat" title="CNCore.getFormat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getFormat</span></code></a>(formatId)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/formats/{formatId}</span></code> <br/> Returns the object format registered in the DataONE Object Format Vocabulary for the given format identifier.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNCore.getLogRecords" title="CNCore.getLogRecords"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getLogRecords</span></code></a>(session[, fromDate, toDate, …])</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/log?[fromDate={fromDate}][&amp;toDate={toDate}][&amp;event={event}][&amp;idFilter={idFilter}][&amp;start={start}][&amp;count={count}]</span></code> <br/> Retrieves consolidated log information for the specified date range (fromDate &lt; timestamp &lt;= toDate) for the entire DataONE infrastructure</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNCore.hasReservation" title="CNCore.hasReservation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hasReservation</span></code></a>(session, subject, id)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/reserve/{id}?subject={subject}</span></code> <br/> Checks to determine if the supplied <em>subject</em> is the owner of the reservation of <em>id</em>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNCore.listChecksumAlgorithms" title="CNCore.listChecksumAlgorithms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listChecksumAlgorithms</span></code></a>()</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/checksum</span></code> <br/> Returns a list of checksum algorithms that are supported by DataONE.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNCore.listFormats" title="CNCore.listFormats"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listFormats</span></code></a>()</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/formats</span></code> <br/> Returns a list of all object formats registered in the DataONE Object Format Vocabulary.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNCore.listNodes" title="CNCore.listNodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listNodes</span></code></a>()</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/node</span></code> <br/> Returns a list of nodes that have been registered with the DataONE infrastructure.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNCore.ping" title="CNCore.ping"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ping</span></code></a>()</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/monitor/ping</span></code> <br/> Low level “are you alive” operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNCore.registerSystemMetadata" title="CNCore.registerSystemMetadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">registerSystemMetadata</span></code></a>(session, pid, sysmeta)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/meta</span></code> <br/> Provides a mechanism for adding system metadata independently of its associated object, such as when adding system metadata for data objects.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNCore.reserveIdentifier" title="CNCore.reserveIdentifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reserveIdentifier</span></code></a>(session, pid)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/reserve</span></code> <br/> Reserves the identifier that is unique and can not be used by any other sessions.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNCore.setObsoletedBy" title="CNCore.setObsoletedBy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setObsoletedBy</span></code></a>(session, pid, obsoletedByPid, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/obsoletedBy/{pid}</span></code> <br/> Updates the <a class="reference internal" href="Types.html#Types.SystemMetadata.obsoletedBy" title="Types.SystemMetadata.obsoletedBy"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Types.SystemMetadata.obsoletedBy</span></code></a> property for an object, indicating that the object specified by <em>pid</em> has been obsoleted by the identifier in <em>obsoletedByPid</em>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNCore.updateSystemMetadata" title="CNCore.updateSystemMetadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">updateSystemMetadata</span></code></a>(session, pid, sysmeta)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/meta</span></code> <br/> Provides a mechanism for updating system metadata for any objects held in the federation.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-CNCore"></span><dl class="py function">
<dt id="CNCore.archive">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">archive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.archive" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/archive/{id}</span></code> <br/> Hides an object managed by DataONE from search operations, effectively preventing its discovery during normal operations.</p>
<p>The operation does not delete the object bytes, but instead sets the <a class="reference internal" href="Types.html#Types.SystemMetadata.archived" title="Types.SystemMetadata.archived"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Types.SystemMetadata.archived</span></code></a> flag to True. This ensures that the object can still be resolved (and hence remain valid for existing citations and cross references), though will not appear in searches.</p>
<p>Objects that are archived can not be updated through the <a class="reference internal" href="MN_APIs.html#MNStorage.update" title="MNStorage.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">MNStorage.update()</span></code></a> operation.</p>
<p>Archived objects can not be un-archived. This behavior may change in future versions of the DataONE API.</p>
<p>The CN should ensure that all MNs holding a copy of the object are informed of the change so that they may update their information about the object.</p>
<p>v2.0: The supplied identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or a <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<p><strong>Note:</strong> This method is private to the CNs and is not available on the public API.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/archive/{id}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier of the object to be archived. May be either a PID or a SID, the latter will act on the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The identifier of the object that was archived.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier">Types.Identifier</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4970)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The archive operation failed because the object does not exist. (errorCode=404, detailCode=4971)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4972)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4973)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4974)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.archive</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.create">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">create</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">object</span></em>, <em class="sig-param"><span class="n">sysmeta</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.create" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/object</span></code> <br/> Used internally within a Coordinating Node to add a new object to the object store.</p>
<p><strong>Note:</strong> This method is private to the CNs and is not available on the public API.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.SystemMetadata" title="v2_0.Types.SystemMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.SystemMetadata</span></code></a> has changed from Version 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/04_uc.html"><span class="doc">UC04</span></a>, <a class="reference internal" href="../design/UseCases/09_uc.html"><span class="doc">UC09</span></a>, <a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/object</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier that should be used in DataONE to identify and access the object. This is an Unicode string that follows the constraints on identifiers described in <a class="reference internal" href="../design/PIDs.html"><span class="doc">Identifiers in DataONE</span></a>. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>object</strong> (<em>bytes</em>) – The object (e.g. Science Metadata) bytes.</p></li>
<li><p><strong>sysmeta</strong> (<a class="reference internal" href="Types.html#Types.SystemMetadata" title="Types.SystemMetadata"><em>Types.SystemMetadata</em></a>) – The complete system metadata document describing the object. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The identifier that was used to insert the document into the system. This should be the same as the identifier provided as the <em>pid</em> parameter.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier">Types.Identifier</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The provided identity does not have permission to WRITE to the Member Node. (errorCode=401, detailCode=1100)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.IdentifierNotUnique" title="Exceptions.IdentifierNotUnique"><strong>Exceptions.IdentifierNotUnique</strong></a> – The requested identifier is already used by another object and therefore can not be used for this object. Clients should choose a new identifier that is unique and retry the operation or use <a class="reference internal" href="#CNCore.reserveIdentifier" title="CNCore.reserveIdentifier"><code class="xref py py-func docutils literal notranslate"><span class="pre">CNCore.reserveIdentifier()</span></code></a> to reserve one. (errorCode=409, detailCode=1120)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.UnsupportedType" title="Exceptions.UnsupportedType"><strong>Exceptions.UnsupportedType</strong></a> – The object store is unable to store the provided content. (errorCode=400, detailCode=4895)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InsufficientResources" title="Exceptions.InsufficientResources"><strong>Exceptions.InsufficientResources</strong></a> – The CN object store is unable to execute the transfer because of resource limitations. (errorCode=413, detailCode=4897)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidSystemMetadata" title="Exceptions.InvalidSystemMetadata"><strong>Exceptions.InvalidSystemMetadata</strong></a> – The supplied system metadata is invalid. This could be because some required field is not set, the metadata document is malformed, or the value of some field is not valid. (errorCode=400, detailCode=4896)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4893)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4894)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4890)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4891)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.create</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.delete">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.delete" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/object/{id}</span></code> <br/> Deletes an object from the entire DataONE system, including all nodes known to hold a copy of the object. The PID and/or SID of the object will continue to be shown as in use (preventing its reuse for other objects), however the object should not be resolvable (NotFound) or retrievable.</p>
<p>The delete operation is used only by administrators in response to a request to remove an object from DataONE, perhaps because of legal requirements or the object has been identified as containing malicious content.</p>
<p><strong>Note:</strong> This method is private to the CNs and is not available on the public API.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/object/{id}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier of the object to be deleted. May be either a PID or SID, the latter will operate on the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The identifier of the object that was deleted.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier">Types.Identifier</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4960)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The delete operation failed because the object does not exist. (errorCode=404, detailCode=4961)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4962)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4963)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4964)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.delete</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.generateIdentifier">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">generateIdentifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">scheme</span></em>, <em class="sig-param"><span class="n">fragment</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.generateIdentifier" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/generate</span></code> <br/> Given a scheme and optional fragment, generates an identifier with that scheme and fragment that is unique. Returned identifier may be used as either a PID or a SID.</p>
<p>Note that the generated identifier is also reserved. <em>See:</em> <a class="reference internal" href="#CNCore.reserveIdentifier" title="CNCore.reserveIdentifier"><code class="xref py py-func docutils literal notranslate"><span class="pre">CNCore.reserveIdentifier()</span></code></a>.</p>
<p>The message body is encoded as MIME Multipart/form-data</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/generate</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>scheme</strong> (<em>string</em>) – The name of the identifier scheme to be used, drawn from a DataONE-specific vocabulary of identifier scheme names, including several common syntaxes such as DOI, ARK, LSID, UUID, and LSRN, among others. The first version of this method only supports the UUID scheme, and ignores the fragment parameter.  Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>fragment</strong> (<em>string</em>) – The optional fragment to include in the generated Identifier. This parameter is optional and may not be present in the message body. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The identifier that was generated</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier">Types.Identifier</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – The supplied authentication token is not a proper certificate, or missing required fields, or otherwise proves invalid. (errorCode=401, detailCode=4190)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4210)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – Supplied credentials does not have WRITE permission (errorCode=401, detailCode=4180)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The schme requested is not a valid schme accepted by this service (errorCode=400, detailCode=4200)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4191)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id6">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.generateIdentifier</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.getCapabilities">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">getCapabilities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.getCapabilities" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/</span></code> <br/> Returns a document describing the capabilities of the Coordinating Node.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.Node" title="v2_0.Types.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.Node</span></code></a> has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The technical capabilities of the Coordinating Node</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Node" title="Types.Node">Types.Node</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4802)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4803)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id7">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.getCapabilities</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.getFormat">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">getFormat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">formatId</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.getFormat" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/formats/{formatId}</span></code> <br/> Returns the object format registered in the DataONE Object Format Vocabulary for the given format identifier.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.ObjectFormat" title="v2_0.Types.ObjectFormat"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.ObjectFormat</span></code></a> has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/formats/{formatId}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>formatId</strong> (<a class="reference internal" href="Types.html#Types.ObjectFormatIdentifier" title="Types.ObjectFormatIdentifier"><em>Types.ObjectFormatIdentifier</em></a>) – Unique ObjectFormatIdentifier for the object format Transmitted as part of the URL path and must be escaped accordingly.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The object format registered in the DataONE Object Format Vocablulary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.ObjectFormat" title="Types.ObjectFormat">Types.ObjectFormat</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The service is not implemented. (errorCode=501, detailCode=4845)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – Unexpected exception from the service. (errorCode=500, detailCode=4846)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The format specified by <em>formatId</em> does not exist at this node. (errorCode=404, detailCode=4848)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<p>Retrieve information about the <code class="docutils literal notranslate"><span class="pre">http://www.openarchives.org/ore/terms</span></code>
formatId. Note that formatId has characters that should be escaped when added
as a URL path element. This is done here using a urlencode script.</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">FORMATID</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;http://www.openarchives.org/ore/terms&quot;</span> <span class="p">|</span> urlencode<span class="k">)</span>
<span class="c1">#encoded formatid: http%3A%2F%2Fwww.openarchives.org%2Fore%2Fterms</span>

curl -s <span class="s2">&quot;https://cn.dataone.org/cn/v2/formats/</span><span class="si">${</span><span class="nv">FORMATID</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">|</span> xml fo

&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span>?&gt;
&lt;d1:objectFormat xmlns:d1<span class="o">=</span><span class="s2">&quot;http://ns.dataone.org/service/types/v1&quot;</span>&gt;
  &lt;formatId&gt;http://www.openarchives.org/ore/terms&lt;/formatId&gt;
  &lt;formatName&gt;Object Reuse and Exchange Vocabulary&lt;/formatName&gt;
  &lt;formatType&gt;RESOURCE&lt;/formatType&gt;
&lt;/d1:objectFormat&gt;
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.getLogRecords">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">getLogRecords</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">fromDate</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">toDate</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">event</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">idFilter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">count</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.getLogRecords" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/log?[fromDate={fromDate}][&amp;toDate={toDate}][&amp;event={event}][&amp;idFilter={idFilter}][&amp;start={start}][&amp;count={count}]</span></code> <br/> Retrieves consolidated log information for the specified date range (fromDate &lt; timestamp &lt;= toDate) for the entire DataONE infrastructure</p>
<p>Note that date time precision is limited to one millisecond. If no timezone information is provided, the UTC will be assumed.</p>
<p>Note that full access to log records requires access through a priviledged account. A public user may be presented with an empty response.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.Log" title="v2_0.Types.Log"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.Log</span></code></a> has changed.</p>
<p>v2.0: The event parameter has changed from <code class="xref py py-class docutils literal notranslate"><span class="pre">v1_0.Types.Event</span></code> to a plain <em>string</em></p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/log?[fromDate={fromDate}][&amp;toDate={toDate}][&amp;event={event}][&amp;idFilter={idFilter}][&amp;start={start}][&amp;count={count}]</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>fromDate</strong> (<a class="reference internal" href="Types11.html#Types.DateTime" title="Types.DateTime"><em>Types.DateTime</em></a>) – Starting time for records in response, entries with timestamp greater than or equal to (&gt;=) this value will be returned. Defaults to include all records. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>toDate</strong> (<a class="reference internal" href="Types11.html#Types.DateTime" title="Types.DateTime"><em>Types.DateTime</em></a>) – End time for records in response, entries with timestamp less than (&lt;) this value will be returned. If not specified, then defaults to now. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>event</strong> (<a class="reference internal" href="Types.html#Types.Event" title="Types.Event"><em>Types.Event</em></a><em>, </em><em>string</em>) – Return only log records for the specified type of event.  Default is all. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>idFilter</strong> (<em>string</em>) – Return only log records for identifiers that start with the supplied identifier string. Support for this parameter is optional and MAY be ignored by the Coordinating Node implementation with no warning. Supports PID and SID values. Only PID values will be included in the returned entries. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>start</strong> (<em>integer</em>) – The zero based index of the first log record to return. Default is 0. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>count</strong> (<em>integer</em>) – The maximum number of log records that should be returned in the response. The Member Node may return fewer and the caller should check the <em>total</em> in the response to determine if further pages may be retrieved. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Log" title="Types.Log">Types.Log</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=1470)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=1490)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=1460)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=1461)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=1480)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InsufficientResources" title="Exceptions.InsufficientResources"><strong>Exceptions.InsufficientResources</strong></a> – The request could not be serviced due to a limitation of resources - too many requests, internal service timeout, or another similar failure. (errorCode=413, detailCode=1481)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id8">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.getLogRecords</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.hasReservation">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">hasReservation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em>, <em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.hasReservation" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/reserve/{id}?subject={subject}</span></code> <br/> Checks to determine if the supplied <em>subject</em> is the owner of the reservation of <em>id</em>.</p>
<p>A positive response (that the <em>pid</em> is reserved and owned by <em>subject</em>) is indicated by a return of a HTTP status of 200.</p>
<p>A negative response is indicated by an exception and the associated HTTP status code.</p>
<p>v2.0: The identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/reserve/{id}?subject={subject}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The subject of the <a class="reference internal" href="../glossary.html#term-principal"><span class="xref std std-term">principal</span></a> (user) that made the reservation.  Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier that is being checked for existing as a reserved identifier or is in use as an identifier for an existing object. May be either a PID or a SID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True - subject has the reservation on the PID; False - the PID does not exist; False - the PID is already in use; False - the PID is reserved by somone else.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The method functionality is not implemented. (errorCode=501, detailCode=4920)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – An internal server error occurred. (errorCode=500, detailCode=4921)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – The session information is invalid. (errorCode=401, detailCode=4922)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The PID does not exist as a reservation or an existing object and is not in use as an identifier. (errorCode=404, detailCode=4923)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The PID is reserved but the owner is not the <a class="reference internal" href="../glossary.html#term-principal"><span class="xref std std-term">principal</span></a> identified by the <em>subjectInfo</em> OR the provide <em>session</em> does not have authority to access this service. (errorCode=401, detailCode=4924)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The request was malformed and could not be processed (errorCode=400, detailCode=4925)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id9">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.hasReservation</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.listChecksumAlgorithms">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">listChecksumAlgorithms</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.listChecksumAlgorithms" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/checksum</span></code> <br/> Returns a list of checksum algorithms that are supported by DataONE.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/checksum</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of supported checksum algorithms.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.ChecksumAlgorithmList" title="Types.ChecksumAlgorithmList">Types.ChecksumAlgorithmList</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The service is not implemented. (errorCode=501, detailCode=4880)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – A problem occurred with the service that prevented it from returning the expected response. (errorCode=500, detailCode=4881)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id10">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.listChecksumAlgorithms</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.listFormats">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">listFormats</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.listFormats" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/formats</span></code> <br/> Returns a list of all object formats registered in the DataONE Object Format Vocabulary.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.ObjectFormat" title="v2_0.Types.ObjectFormat"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.ObjectFormat</span></code></a> has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/formats</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The list of object formats registered in the DataONE Object Format Vocabulary</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.ObjectFormatList" title="Types.ObjectFormatList">Types.ObjectFormatList</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The service is not implemented. (errorCode=501, detailCode=4840)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – An error occurred when attempting to service the request. (errorCode=500, detailCode=4841)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span>curl -s &quot;http://cn.dataone.org/cn/v2/formats&quot;

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;/cn/xslt/dataone.types.v2.xsl&quot; ?&gt;</span>
<span class="nt">&lt;ns3:objectFormatList</span> <span class="na">xmlns:ns2=</span><span class="s">&quot;http://ns.dataone.org/service/types/v1&quot;</span>
                      <span class="na">xmlns:ns3=</span><span class="s">&quot;http://ns.dataone.org/service/types/v2.0&quot;</span>
                      <span class="na">count=</span><span class="s">&quot;132&quot;</span> <span class="na">start=</span><span class="s">&quot;0&quot;</span> <span class="na">total=</span><span class="s">&quot;132&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;objectFormat&gt;</span>
        <span class="nt">&lt;formatId&gt;</span>eml://ecoinformatics.org/eml-2.0.0<span class="nt">&lt;/formatId&gt;</span>
        <span class="nt">&lt;formatName&gt;</span>Ecological Metadata Language, version 2.0.0<span class="nt">&lt;/formatName&gt;</span>
        <span class="nt">&lt;formatType&gt;</span>METADATA<span class="nt">&lt;/formatType&gt;</span>
        <span class="nt">&lt;mediaType</span> <span class="na">name=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;extension&gt;</span>xml<span class="nt">&lt;/extension&gt;</span>
    <span class="nt">&lt;/objectFormat&gt;</span>
    <span class="nt">&lt;objectFormat&gt;</span>
        <span class="nt">&lt;formatId&gt;</span>eml://ecoinformatics.org/eml-2.0.1<span class="nt">&lt;/formatId&gt;</span>
        <span class="nt">&lt;formatName&gt;</span>Ecological Metadata Language, version 2.0.1<span class="nt">&lt;/formatName&gt;</span>
        <span class="nt">&lt;formatType&gt;</span>METADATA<span class="nt">&lt;/formatType&gt;</span>
        <span class="nt">&lt;mediaType</span> <span class="na">name=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;extension&gt;</span>xml<span class="nt">&lt;/extension&gt;</span>
    <span class="nt">&lt;/objectFormat&gt;</span>
    <span class="nt">&lt;objectFormat&gt;</span>
        <span class="nt">&lt;formatId&gt;</span>eml://ecoinformatics.org/eml-2.1.0<span class="nt">&lt;/formatId&gt;</span>
        <span class="nt">&lt;formatName&gt;</span>Ecological Metadata Language, version 2.1.0<span class="nt">&lt;/formatName&gt;</span>
        <span class="nt">&lt;formatType&gt;</span>METADATA<span class="nt">&lt;/formatType&gt;</span>
        <span class="nt">&lt;mediaType</span> <span class="na">name=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;extension&gt;</span>xml<span class="nt">&lt;/extension&gt;</span>
    <span class="nt">&lt;/objectFormat&gt;</span>
    ...
<span class="nt">&lt;/ns3:objectFormatList&gt;</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.listNodes">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">listNodes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.listNodes" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/node</span></code> <br/> Returns a list of nodes that have been registered with the DataONE infrastructure.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.Node" title="v2_0.Types.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.Node</span></code></a> has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/39_uc.html"><span class="doc">UC39</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/node</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of nodes from the registry</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.NodeList" title="Types.NodeList">Types.NodeList</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4800)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4801)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<p>List nodes registered with the Coordinating Nodes. The response is lengthy, only
a portion is shown here.</p>
<div class="highlight-xml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre></div></td><td class="code"><div class="highlight"><pre><span></span>curl -s &quot;http://cn.dataone.org/cn/v2/node&quot;

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;/cn/xslt/dataone.types.v2.xsl&quot; ?&gt;</span>
<span class="nt">&lt;ns3:nodeList</span> <span class="na">xmlns:ns2=</span><span class="s">&quot;http://ns.dataone.org/service/types/v1&quot;</span>
              <span class="na">xmlns:ns3=</span><span class="s">&quot;http://ns.dataone.org/service/types/v2.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">replicate=</span><span class="s">&quot;false&quot;</span> <span class="na">synchronize=</span><span class="s">&quot;false&quot;</span> <span class="na">type=</span><span class="s">&quot;cn&quot;</span> <span class="na">state=</span><span class="s">&quot;up&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;identifier&gt;</span>urn:node:CN<span class="nt">&lt;/identifier&gt;</span>
    <span class="nt">&lt;name&gt;</span>cn<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>Round Robin Router for Production Coordinating Nodes<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;baseURL&gt;</span>https://cn.dataone.org/cn<span class="nt">&lt;/baseURL&gt;</span>
    <span class="nt">&lt;services&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNCore&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNRead&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNAuthorization&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNIdentity&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;restriction</span> <span class="na">methodName=</span><span class="s">&quot;mapIdentity&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;subject&gt;</span>CN=urn:node:KNB,DC=dataone,DC=org<span class="nt">&lt;/subject&gt;</span>
        <span class="nt">&lt;/restriction&gt;</span>
      <span class="nt">&lt;/service&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNReplication&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNRegister&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNCore&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNRead&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNAuthorization&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNIdentity&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNReplication&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNRegister&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNDiagnostic&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;CNView&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/services&gt;</span>
    <span class="nt">&lt;subject&gt;</span>CN=urn:node:CN,DC=dataone,DC=org<span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;contactSubject&gt;</span>CN=Robert P Waltz A904,O=Google,C=US,DC=cilogon,DC=org<span class="nt">&lt;/contactSubject&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">key=</span><span class="s">&quot;CN_operational_status&quot;</span><span class="nt">&gt;</span>operational<span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">key=</span><span class="s">&quot;CN_node_name&quot;</span><span class="nt">&gt;</span>CN<span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;/node&gt;</span>

  ...

  <span class="nt">&lt;node</span> <span class="na">replicate=</span><span class="s">&quot;true&quot;</span> <span class="na">synchronize=</span><span class="s">&quot;true&quot;</span> <span class="na">type=</span><span class="s">&quot;mn&quot;</span> <span class="na">state=</span><span class="s">&quot;up&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;identifier&gt;</span>urn:node:KNB<span class="nt">&lt;/identifier&gt;</span>
      <span class="nt">&lt;name&gt;</span>KNB Data Repository<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;description&gt;</span>The Knowledge Network for Biocomplexity (KNB) is a national ... <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;baseURL&gt;</span>https://knb.ecoinformatics.org/knb/d1/mn<span class="nt">&lt;/baseURL&gt;</span>
      <span class="nt">&lt;services&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNCore&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNCore&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNRead&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNRead&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNAuthorization&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNAuthorization&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNStorage&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNStorage&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNReplication&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNReplication&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNPackage&quot;</span> <span class="na">version=</span><span class="s">&quot;v1&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNPackage&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;MNView&quot;</span> <span class="na">version=</span><span class="s">&quot;v2&quot;</span> <span class="na">available=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/services&gt;</span>
      <span class="nt">&lt;synchronization&gt;</span>
          <span class="nt">&lt;schedule</span> <span class="na">hour=</span><span class="s">&quot;*&quot;</span> <span class="na">mday=</span><span class="s">&quot;*&quot;</span> <span class="na">min=</span><span class="s">&quot;0/3&quot;</span> <span class="na">mon=</span><span class="s">&quot;*&quot;</span> <span class="na">sec=</span><span class="s">&quot;10&quot;</span> <span class="na">wday=</span><span class="s">&quot;?&quot;</span> <span class="na">year=</span><span class="s">&quot;*&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;lastHarvested&gt;</span>2019-09-14T23:40:15.289+00:00<span class="nt">&lt;/lastHarvested&gt;</span>
          <span class="nt">&lt;lastCompleteHarvest&gt;</span>1900-01-01T00:00:00.000+00:00<span class="nt">&lt;/lastCompleteHarvest&gt;</span>
      <span class="nt">&lt;/synchronization&gt;</span>
      <span class="nt">&lt;subject&gt;</span>CN=urn:node:KNB,DC=dataone,DC=org<span class="nt">&lt;/subject&gt;</span>
      <span class="nt">&lt;contactSubject&gt;</span>CN=Christopher Jones A2108,O=Google,C=US,DC=cilogon,DC=org<span class="nt">&lt;/contactSubject&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">key=</span><span class="s">&quot;CN_operational_status&quot;</span><span class="nt">&gt;</span>operational<span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">key=</span><span class="s">&quot;CN_date_operational&quot;</span><span class="nt">&gt;</span>2012-07-23T00:00:0.000Z<span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">key=</span><span class="s">&quot;CN_node_name&quot;</span><span class="nt">&gt;</span>Knowledge Network for Biocomplexity<span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">key=</span><span class="s">&quot;CN_logo_url&quot;</span><span class="nt">&gt;</span>https://raw.githubusercontent.com/DataONEorg/member-node-info/master/production/graphics/web/KNB.png<span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">key=</span><span class="s">&quot;CN_info_url&quot;</span><span class="nt">&gt;</span>https://knb.ecoinformatics.org/<span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">key=</span><span class="s">&quot;CN_location_lonlat&quot;</span><span class="nt">&gt;</span>-119.697933,34.420222<span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">replicate=</span><span class="s">&quot;false&quot;</span> <span class="na">synchronize=</span><span class="s">&quot;true&quot;</span> <span class="na">type=</span><span class="s">&quot;mn&quot;</span> <span class="na">state=</span><span class="s">&quot;up&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/ns3:nodeList&gt;</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.ping">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">ping</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.ping" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/monitor/ping</span></code> <br/> Low level “are you alive” operation. A valid ping response is indicated by a HTTP status of 200. A timestmap indicating the current system time (UTC) on the node MUST be returned in the HTTP Date header.</p>
<p>The Member Node should perform some minimal internal functionality testing before answering. However, ping checks will be frequent (every few minutes) so the internal functionality test should not be high impact.</p>
<p>Any status response other than 200 indicates that the node is offline for DataONE operations.</p>
<p>Note that the timestamp returned in the Date header should follow the semantics as described in the HTTP specifications, <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18</a></p>
<p>The response body will be ignored by the caller expect in the case of an error, in which case the response body should contain the appropriate DataONE exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/10_uc.html"><span class="doc">UC10</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/monitor/ping</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Null body or Exception. The body of the message is ignored by the caller. The HTTP header <em>Date</em> MUST be set in the response.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>null</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2041)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2042)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InsufficientResources" title="Exceptions.InsufficientResources"><strong>Exceptions.InsufficientResources</strong></a> – A ping response may return InsufficientResources if for example the system is in a state where normal DataONE operations may be impeded by an unusually high load on the node. (errorCode=413, detailCode=2045)</p></li>
</ul>
</dd>
</dl>
<p><strong>Response</strong></p>
<p>The response should be a valid HTTP response with a blank or arbitrary body.
Only the HTTP header information is considered by the requestor. A successful
response MUST have a HTTP status code of 200. In case of an error condition,
the appropriate HTTP status code MUST be set, and an exception or error
information MAY be returned in the response body.</p>
<p><strong>Example</strong></p>
<p>Example of ping request and response for a Member Node (Coordinating Nodes
implement the same functionality). Lines prefixed with “&gt;” and “&lt;” indicate
outgoing and returned information respectively. Lines associated with SSL
connection initiation and close are not shown here. Note that the actual response
headers may vary, the only required header fields are the first status line and a
<code class="docutils literal notranslate"><span class="pre">Date</span></code> entry. However in order to fully support clients that may cache the response,
it is recommended that <code class="docutils literal notranslate"><span class="pre">Expires</span></code>, and <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> headers are returned.</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll">curl -v <span class="s2">&quot;https://cn.dataone.org/cn/v2/monitor/ping/&quot;</span>
</span>
&gt; GET /cn/v2/monitor/ping HTTP/1.1
&gt; Host: cn.dataone.org
&gt; User-Agent: curl/7.65.3
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 <span class="m">200</span> <span class="m">200</span>
<span class="hll">&lt; Date: Tue, <span class="m">17</span> Sep <span class="m">2019</span> <span class="m">13</span>:13:04 GMT
</span>&lt; Server: Apache/2.4.41 <span class="o">(</span>Ubuntu<span class="o">)</span>
&lt; Vary: User-Agent
&lt; Expires: -1
&lt; Cache-Control: private, max-age<span class="o">=</span><span class="m">0</span>
&lt; Content-Length: <span class="m">0</span>
&lt; Access-Control-Allow-Origin:
&lt; Access-Control-Allow-Credentials: <span class="nb">true</span>
&lt; Access-Control-Allow-Headers: Authorization, Content-Type, Location, Content-Length, x-annotator-auth-token
&lt; Access-Control-Expose-Headers: Content-Length, Content-Type, Location
&lt; Access-Control-Allow-Methods: POST, GET, OPTIONS, PUT, DELETE
&lt; Content-Type: text/xml<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.registerSystemMetadata">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">registerSystemMetadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">sysmeta</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.registerSystemMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/meta</span></code> <br/> Provides a mechanism for adding system metadata independently of its associated object, such as when adding system metadata for data objects.</p>
<p>This method is used internally by Coordinating Nodes.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.SystemMetadata" title="v2_0.Types.SystemMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.SystemMetadata</span></code></a> has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/meta</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>sysmeta</strong> (<a class="reference internal" href="Types.html#Types.SystemMetadata" title="Types.SystemMetadata"><em>Types.SystemMetadata</em></a>) – Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The pid that was updated.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier">Types.Identifier</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4860)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4861)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4862)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4863)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidSystemMetadata" title="Exceptions.InvalidSystemMetadata"><strong>Exceptions.InvalidSystemMetadata</strong></a> – (errorCode=400, detailCode=4864)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4865)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id11">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.registerSystemMetadata</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.reserveIdentifier">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">reserveIdentifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.reserveIdentifier" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/reserve</span></code> <br/> Reserves the identifier that is unique and can not be used by any other sessions. Future calls to <a class="reference internal" href="MN_APIs.html#MNStorage.create" title="MNStorage.create"><code class="xref py py-func docutils literal notranslate"><span class="pre">MNStorage.create()</span></code></a> and <a class="reference internal" href="MN_APIs.html#MNStorage.update" title="MNStorage.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">MNStorage.update()</span></code></a> that reference this ID must be made by the same <a class="reference internal" href="../glossary.html#term-principal"><span class="xref std std-term">principal</span></a> making the reservation, otherwise an error is raised on those methods.</p>
<p>The requested identifier is transmitted in a MIME Multipart/form-data body with <em>id</em> as key, and the identifier string as value.</p>
<p>v2.0: The identifier being reserved may be used as a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/reserve</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier that is to be reserved. May be a PID or a SID value. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The identifier that was reserved</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier">Types.Identifier</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4190)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4210)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – Supplied credentials does not have WRITE permission (errorCode=401, detailCode=4180)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The identifier requested is not a valid format accepted by this service (errorCode=400, detailCode=4200)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.IdentifierNotUnique" title="Exceptions.IdentifierNotUnique"><strong>Exceptions.IdentifierNotUnique</strong></a> – The requested identifier can not be reserved because it already exists in the DataONE system or has already been reserved. (errorCode=409, detailCode=4210)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4191)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<p>Reserve an identifier using bearer authentication:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$token</span><span class="s2">&quot;</span> <span class="se">\</span>
     -F <span class="s2">&quot;pid=urn:uuid:56daae54-a42a-4927-83f1-878ec25ac366&quot;</span> <span class="se">\</span>
     -X POST<span class="se">\</span>
     <span class="s2">&quot;https://cn.dataone.org/cn/v2/reserve&quot;</span>
</pre></div>
</div>
<p>Result (new lines added for readability):</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="nt">&lt;identifier</span> <span class="na">xmlns=</span><span class="s">&quot;http://ns.dataone.org/service/types/v1&quot;</span><span class="nt">&gt;</span>
  urn:uuid:56daae54-a42a-4927-83f1-878ec25ac366
<span class="nt">&lt;/identifier&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.setObsoletedBy">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">setObsoletedBy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">obsoletedByPid</span></em>, <em class="sig-param"><span class="n">serialVersion</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.setObsoletedBy" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/obsoletedBy/{pid}</span></code> <br/> Updates the <a class="reference internal" href="Types.html#Types.SystemMetadata.obsoletedBy" title="Types.SystemMetadata.obsoletedBy"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Types.SystemMetadata.obsoletedBy</span></code></a> property for an object, indicating that the object specified by <em>pid</em> has been obsoleted by the identifier in <em>obsoletedByPid</em>.</p>
<p>v2.0: Method implementation has changed to ensure that the obsolescence chain is consistent with use of any SID assigned to the object.</p>
<p><strong>Note:</strong> This method is private to the CNs and is not available on the public API.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/obsoletedBy/{pid}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier of the object system metadata being updated. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>obsoletedByPid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier of the object that obsoletes the object identified by <em>pid</em>.  Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>serialVersion</strong> (<em>unsigned long</em>) – The serial version of the system metadata being updated. If the specified <em>serialVersion</em> does not match the current version at the Coordinating Nodes, then a <a class="reference internal" href="Exceptions.html#Exceptions.VersionMismatch" title="Exceptions.VersionMismatch"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exceptions.VersionMismatch</span></code></a> error is raised and no changes are made. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the operation succeeds, otherwise false.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The service endpoint has not yet been fully implemented (errorCode=501, detailCode=4940)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – A problem occurred with the service that prevented it from returning the expected response. (errorCode=500, detailCode=4941)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The request was malformed and could not be processed. (errorCode=400, detailCode=4942)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – The supplied session information could not be verified as a valid DataONE session. (errorCode=401, detailCode=4943)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified <em>pid</em> does not exist. (errorCode=404, detailCode=4944)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The credentials provided with the request in the <em>session</em> do not have <em>write</em> privileges on <em>pid</em>. (errorCode=401, detailCode=4945)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.VersionMismatch" title="Exceptions.VersionMismatch"><strong>Exceptions.VersionMismatch</strong></a> – The provided <em>serialVersion</em> does not match the latest version that is held by the CN. The client should refresh it’s copy, verify that the update is still necessary, and resubmit the request with the updated information. (errorCode=409, detailCode=4946)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id12">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.setObsoletedBy</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNCore.updateSystemMetadata">
<code class="sig-prename descclassname">CNCore.</code><code class="sig-name descname">updateSystemMetadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">sysmeta</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNCore.updateSystemMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/meta</span></code> <br/> Provides a mechanism for updating system metadata for any objects held in the federation.</p>
<p>Usage of this method SHOULD be restricted to CNs for updating the system metadata in the underlying CN storage sub-system.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.SystemMetadata" title="v2_0.Types.SystemMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.SystemMetadata</span></code></a> has changed.</p>
<p>Note: the serial version and the replica list in the new system metadata will be ignored.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/meta</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>sysmeta</strong> (<a class="reference internal" href="Types.html#Types.SystemMetadata" title="Types.SystemMetadata"><em>Types.SystemMetadata</em></a>) – Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the update was successful.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4866)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4867)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4868)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4869)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidSystemMetadata" title="Exceptions.InvalidSystemMetadata"><strong>Exceptions.InvalidSystemMetadata</strong></a> – (errorCode=400, detailCode=4956)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4957)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id13">
<p class="admonition-title">Todo</p>
<p>Example for CNCore.updateSystemMetadata</p>
</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="read-api">
<h2><a class="toc-backref" href="#id47">Read API</a><a class="headerlink" href="#read-api" title="Permalink to this headline">¶</a></h2>
<p>The <em>CNRead</em> API implements methods that enable object retrieval operations
on a <a class="reference internal" href="../glossary.html#term-Coordinating-Node"><span class="xref std std-term">Coordinating Node</span></a>. It includes searches of science metadata and
system metadata and exposes log records held by CNs.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNRead.describe" title="CNRead.describe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">describe</span></code></a>(session, id)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HEAD</span> <span class="pre">/object/{id}</span></code> <br/> This method provides a lighter weight mechanism than <a class="reference internal" href="#CNRead.getSystemMetadata" title="CNRead.getSystemMetadata"><code class="xref py py-func docutils literal notranslate"><span class="pre">CNRead.getSystemMetadata()</span></code></a> for a client to determine basic properties of the referenced object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNRead.get" title="CNRead.get"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code></a>(session, id)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/object/{id}</span></code> <br/> Retrieves the object identified by <em>id</em> from the node.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNRead.getChecksum" title="CNRead.getChecksum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getChecksum</span></code></a>(session, pid)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/checksum/{pid}</span></code> <br/> Returns the checksum for the specified object as reported in the system metadata.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNRead.getQueryEngineDescription" title="CNRead.getQueryEngineDescription"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getQueryEngineDescription</span></code></a>(session, queryEngine)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query/{queryType}</span></code> <br/> Provides metadata about the query service of the specified <em>queryEngine</em>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNRead.getSystemMetadata" title="CNRead.getSystemMetadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getSystemMetadata</span></code></a>(session, id)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/meta/{id}</span></code> <br/> Returns the <a class="reference internal" href="../glossary.html#term-system-metadata"><span class="xref std std-term">system metadata</span></a> that contains DataONE specific information about the object identified by <em>id</em>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNRead.listObjects" title="CNRead.listObjects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listObjects</span></code></a>(session[, fromDate, toDate, …])</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/object[?fromDate={fromDate}&amp;toDate={toDate}&amp;identifier={identifier}&amp;formatId={formatId}&amp;nodeId={nodeId}&amp;start={start}&amp;count={count}]</span></code> <br/> Retrieve the list of objects present on the CN that match the calling parameters. At a minimum, this method should be able to return a list of objects that match::.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNRead.listQueryEngines" title="CNRead.listQueryEngines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listQueryEngines</span></code></a>(session)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query</span></code> <br/> Returns a list of query engines, i.e. supported values for the <em>queryEngine</em> parameter of the <em>getQueryEngineDescription</em> and <em>query</em> operations.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNRead.query" title="CNRead.query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query</span></code></a>(session, queryEngine, query)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query/{queryEngine}/{query}</span></code> <br/> Submit a query against the specified <em>queryEngine</em> and return the response as formatted by the queryEngine.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNRead.resolve" title="CNRead.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">resolve</span></code></a>(session, id)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/resolve/{id}</span></code> <br/> Returns a list of nodes (MNs or CNs) known to hold copies of the object identified by <em>id</em>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNRead.search" title="CNRead.search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">search</span></code></a>(session, queryType, query)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/search/{queryType}/{query}</span></code> <br/> Search the metadata catalog and return identifiers of metadata records that match the criteria.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNRead.synchronize" title="CNRead.synchronize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">synchronize</span></code></a>(session, pid)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/synchronize</span></code> <br/> Indicates to the CN that a new or existing object identified by PID requires synchronization.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-CNRead"></span><dl class="py function">
<dt id="CNRead.describe">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">describe</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.describe" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">HEAD</span> <span class="pre">/object/{id}</span></code> <br/> This method provides a lighter weight mechanism than <a class="reference internal" href="#CNRead.getSystemMetadata" title="CNRead.getSystemMetadata"><code class="xref py py-func docutils literal notranslate"><span class="pre">CNRead.getSystemMetadata()</span></code></a> for a client to determine basic properties of the referenced object. The response should indicate properties that are typically returned in a HTTP HEAD request: the date late modified, the size of the object, the type of the object (the <code class="xref py py-attr docutils literal notranslate"><span class="pre">SystemMetadata.formatId</span></code>).</p>
<p>The principal indicated by <em>token</em> must have read privileges on the object, otherwise <a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exceptions.NotAuthorized</span></code></a> is raised.</p>
<p>If the object does not exist on the node servicing the request, then <a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exceptions.NotFound</span></code></a> must be raised even if the object exists on another node in the DataONE system.</p>
<p>Note that this method is likely to be called frequently and so efficiency should be taken into consideration during implementation.</p>
<p>v2.0: The supplied identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or a <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">HEAD</span> <span class="pre">/object/{id}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier for the object in question. May be either a PID or a SID, the latter acting as if called with the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A set of values providing a basic description of the object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types11.html#Types.DescribeResponse" title="Types.DescribeResponse">Types.DescribeResponse</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4930)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4931)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4932)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – (errorCode=404, detailCode=4933)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4934)</p></li>
</ul>
</dd>
</dl>
<p><strong>Examples</strong></p>
<p>(HEAD) Retrieve information about the object with identifier “ABC123”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">I</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mn1</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mn</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="n">ABC123</span>

<span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="n">OK</span>
<span class="n">Last</span><span class="o">-</span><span class="n">Modified</span><span class="p">:</span> <span class="n">Wed</span><span class="p">,</span> <span class="mi">16</span> <span class="n">Dec</span> <span class="mi">2009</span> <span class="mi">13</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">34</span> <span class="n">GMT</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">10400</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">octet</span><span class="o">-</span><span class="n">stream</span>
<span class="n">DataONE</span><span class="o">-</span><span class="n">ObjectFormat</span><span class="p">:</span> <span class="n">eml</span><span class="p">:</span><span class="o">//</span><span class="n">ecoinformatics</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">eml</span><span class="o">-</span><span class="mf">2.0</span><span class="o">.</span><span class="mi">1</span>
<span class="n">DataONE</span><span class="o">-</span><span class="n">Checksum</span><span class="p">:</span> <span class="n">SHA</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mf">2e01</span><span class="n">e17467891f7c933dbaa00e1459d23db3fe4f</span>
<span class="n">DataONE</span><span class="o">-</span><span class="n">SerialVersion</span><span class="p">:</span> <span class="mi">1234</span>
</pre></div>
</div>
<p>(HEAD) An error response to a describe() request for object “IDONTEXIST”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">I</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mn1</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mn</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="n">IDONTEXIST</span>

<span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">404</span> <span class="n">Not</span> <span class="n">Found</span>
<span class="n">Last</span><span class="o">-</span><span class="n">Modified</span><span class="p">:</span> <span class="n">Wed</span><span class="p">,</span> <span class="mi">16</span> <span class="n">Dec</span> <span class="mi">2009</span> <span class="mi">13</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">34</span> <span class="n">GMT</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">1182</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">text</span><span class="o">/</span><span class="n">xml</span>
<span class="n">DataONE</span><span class="o">-</span><span class="ne">Exception</span><span class="o">-</span><span class="n">Name</span><span class="p">:</span> <span class="n">NotFound</span>
<span class="n">DataONE</span><span class="o">-</span><span class="ne">Exception</span><span class="o">-</span><span class="n">DetailCode</span><span class="p">:</span> <span class="mi">1380</span>
<span class="n">DataONE</span><span class="o">-</span><span class="ne">Exception</span><span class="o">-</span><span class="n">Description</span><span class="p">:</span> <span class="n">The</span> <span class="n">specified</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span> <span class="n">on</span> <span class="n">this</span> <span class="n">node</span><span class="o">.</span>
<span class="n">DataONE</span><span class="o">-</span><span class="ne">Exception</span><span class="o">-</span><span class="n">PID</span><span class="p">:</span> <span class="n">IDONTEXIST</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRead.get">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.get" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/object/{id}</span></code> <br/> Retrieves the object identified by <em>id</em> from the node. If the object is not present on the node, then an <a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exceptions.NotFound</span></code></a> error is raised, regardless of whether the object exists on another node in the DataONE system.</p>
<p>v2.0: The supplied identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or a <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/01_uc.html"><span class="doc">UC01</span></a>, <a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a>, <a class="reference internal" href="../design/UseCases/09_uc.html"><span class="doc">UC09</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/object/{id}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier of the object to be retrieved. May be either a PID or a SID, the latter acting as if called using the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>For science metadata objects, this will be the exact byte stream of the science metadata object as it was original ingested. Note that additional object types may in the future be returned by the get method.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types11.html#Types.OctetStream" title="Types.OctetStream">Types.OctetStream</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=1000)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=1001)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The object specified by the identifier is not present on this (or any) CN. The response body should contain a reference to <a class="reference internal" href="#CNRead.resolve" title="CNRead.resolve"><code class="xref py py-func docutils literal notranslate"><span class="pre">CNRead.resolve()</span></code></a>. (errorCode=404, detailCode=1020)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=1030)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=1010)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<p>See <a class="reference internal" href="MN_APIs.html#MNRead.get" title="MNRead.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">MNRead.get()</span></code></a> for additional details and examples.</p>
</dd></dl>

<dl class="py function">
<dt id="CNRead.getChecksum">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">getChecksum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.getChecksum" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/checksum/{pid}</span></code> <br/> Returns the checksum for the specified object as reported in the system metadata.</p>
<p>Note that the signature of this method differs from <a class="reference internal" href="MN_APIs.html#MNRead.getChecksum" title="MNRead.getChecksum"><code class="xref py py-func docutils literal notranslate"><span class="pre">MNRead.getChecksum()</span></code></a> as that method takes an optional algorithm parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/09_uc.html"><span class="doc">UC09</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/checksum/{pid}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier of the object for which checksum is being requested Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The checksum of the specified object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Checksum" title="Types.Checksum">Types.Checksum</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=1402)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=1410)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – (errorCode=404, detailCode=1420)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=1400)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=1430)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id14">
<p class="admonition-title">Todo</p>
<p>Example for CNRead.getChecksum</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRead.getQueryEngineDescription">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">getQueryEngineDescription</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">queryEngine</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.getQueryEngineDescription" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query/{queryType}</span></code> <br/> Provides metadata about the query service of the specified <em>queryEngine</em>. The metadata provides a brief description of the query engine, its version, its schema version, and an optional list of fields supported by the query engine.</p>
<p>v1.1: This method was added.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.1, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query/{queryType}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>queryEngine</strong> (<em>string</em>) – Indicates which query engine for which to provide descriptive metadata. Currently supported search engines can be determined through CNRead.listQueryEngines. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of fields that are supported by the search index and additional metadata.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types11.html#Types.QueryEngineDescription" title="Types.QueryEngineDescription">Types.QueryEngineDescription</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4410)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4411)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4412)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4413)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified queryEngine does not exist (errorCode=404, detailCode=4414)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id15">
<p class="admonition-title">Todo</p>
<p>Example for CNRead.getQueryEngineDescription</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRead.getSystemMetadata">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">getSystemMetadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.getSystemMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/meta/{id}</span></code> <br/> Returns the <a class="reference internal" href="../glossary.html#term-system-metadata"><span class="xref std std-term">system metadata</span></a> that contains DataONE specific information about the object identified by <em>id</em>. Authoritative copies of system metadata are only available from the Coordinating Nodes.</p>
<p>v2.0: The supplied identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or a <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a> and the returned <a class="reference internal" href="Types2.html#v2_0.Types.SystemMetadata" title="v2_0.Types.SystemMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.SystemMetadata</span></code></a> structure has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/36_uc.html"><span class="doc">UC36</span></a>, <a class="reference internal" href="../design/UseCases/37_uc.html"><span class="doc">UC37</span></a>, <a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/meta/{id}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier for the object of interest. May be either a PID or a SID, the latter acts as if called with the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A system metadata document describing the object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.SystemMetadata" title="Types.SystemMetadata">Types.SystemMetadata</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=1050)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=1041)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=1090)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The principal identified by token does not have READ permission on the object. (errorCode=401, detailCode=1040)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – There is no object identified by <em>pid</em> and so no system metadata can be returned. (errorCode=404, detailCode=1060)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<p>See <a class="reference internal" href="MN_APIs.html#MNRead.getSystemMetadata" title="MNRead.getSystemMetadata"><code class="xref py py-func docutils literal notranslate"><span class="pre">MNRead.getSystemMetadata()</span></code></a> for additional details and examples.</p>
</dd></dl>

<dl class="py function">
<dt id="CNRead.listObjects">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">listObjects</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">fromDate</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">toDate</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">formatId</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">identifier</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">count</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">nodeId</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.listObjects" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/object[?fromDate={fromDate}&amp;toDate={toDate}&amp;identifier={identifier}&amp;formatId={formatId}&amp;nodeId={nodeId}&amp;start={start}&amp;count={count}]</span></code> <br/> Retrieve the list of objects present on the CN that match the calling parameters. At a minimum, this method should be able to return a list of objects that match:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fromDate</span> <span class="o">&lt;</span> <span class="n">SystemMetadata</span><span class="o">.</span><span class="n">dateSysMetadataModified</span>
</pre></div>
</div>
<p>but is expected to also support date range (by also specifying <em>toDate</em>), and should also support slicing of the matching set of records by indicating the starting <em>index</em> of the response (where 0 is the index of the first item) and the <em>count</em> of elements to be returned.</p>
<p>Note that date time precision is limited to one millisecond. If no timezone information is provided, the UTC will be assumed.</p>
<p>Note that date time precision is limited to one millisecond. If no timezone information is provided, the UTC will be assumed.</p>
<p>V2.0: Added filter on authoritativeMemberNode value.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/06_uc.html"><span class="doc">UC06</span></a>, <a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/object[?fromDate={fromDate}&amp;toDate={toDate}&amp;identifier={identifier}&amp;formatId={formatId}&amp;nodeId={nodeId}&amp;start={start}&amp;count={count}]</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>fromDate</strong> (<a class="reference internal" href="Types11.html#Types.DateTime" title="Types.DateTime"><em>Types.DateTime</em></a>) – Entries with <code class="xref py py-attr docutils literal notranslate"><span class="pre">SystemMetadata.dateSysMetadataModified</span></code> greater than or equal to (&gt;=) <em>fromDate</em> must be returned.  Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>toDate</strong> (<a class="reference internal" href="Types11.html#Types.DateTime" title="Types.DateTime"><em>Types.DateTime</em></a>) – Entries with <code class="xref py py-attr docutils literal notranslate"><span class="pre">SystemMetadata.dateSysMetadataModified</span></code> less than (&lt;) <em>toDate</em> must be returned. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>formatId</strong> (<a class="reference internal" href="Types.html#Types.ObjectFormatIdentifier" title="Types.ObjectFormatIdentifier"><em>Types.ObjectFormatIdentifier</em></a>) – Restrict results to the specified object format. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>identifier</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Restrict results to the specified identifier. May be either a PID or a SID. If the latter, will return results for each PID in the series. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>start</strong> (<em>integer</em>) – The zero-based index of the first value, relative to the first record of the resultset that matches the parameters. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>count</strong> (<em>integer</em>) – The maximum number of entries that should be returned in the response. The Member Node may return fewer and the caller should check the <em>total</em> in the response to determine if further pages may be retrieved. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>nodeId</strong> (<a class="reference internal" href="Types.html#Types.NodeReference" title="Types.NodeReference"><em>Types.NodeReference</em></a>) – Restrict results to those with authoritativeMemberNode equal to nodeId. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The list of PIDs that match the query criteria. If none match, an empty list is returned.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.ObjectList" title="Types.ObjectList">Types.ObjectList</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=1520)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=1540)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – Raised if some functionality requested is not implemented. In the case of an optional request parameter not being supported, the errorCode should be 400. If the requested format (through HTTP Accept headers) is not supported, then the standard HTTP 406 error code should be returned. (errorCode=501, detailCode=1560)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=1580)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=1530)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id16">
<p class="admonition-title">Todo</p>
<p>Example for CNRead.listObjects</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRead.listQueryEngines">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">listQueryEngines</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.listQueryEngines" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query</span></code> <br/> Returns a list of query engines, i.e. supported values for the <em>queryEngine</em> parameter of the <em>getQueryEngineDescription</em> and <em>query</em> operations.</p>
<p>The list of search engines available may be influenced by the authentication status of the request.</p>
<p>v1.1: This method was added.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.1, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of names of queryEngines available to the user identified by <em>session</em>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types11.html#Types.QueryEngineList" title="Types.QueryEngineList">Types.QueryEngineList</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4420)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4421)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4422)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4423)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id17">
<p class="admonition-title">Todo</p>
<p>Example for CNRead.listQueryEngines</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRead.query">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">queryEngine</span></em>, <em class="sig-param"><span class="n">query</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.query" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query/{queryEngine}/{query}</span></code> <br/> Submit a query against the specified <em>queryEngine</em> and return the response as formatted by the queryEngine.</p>
<p>The <em>query()</em> operation may be implemented by more than one type of search engine and the <em>queryEngine</em> parameter indicates which search engine is targeted. The value and form of <em>query</em> is determined by the specific query engine.</p>
<p>For example, the solr search engine will accept many of the standard parameters of solr, including field restrictions and faceting.</p>
<p>v1.1: This method was added.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.1, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/02_uc.html"><span class="doc">UC02</span></a>, <a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/query/{queryEngine}/{query}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>queryEngine</strong> (<em>string</em>) – Indicates which search engine will be used to handle the query. Supported search engines can be determined through the CNRead.listQueryEngines API call. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>query</strong> (<em>string</em>) – The remainder of the URL is passed verbatim to the respective search engine implementation. Hence it may contain additional path elements and query elements as determined by the functionality of the search engine. The caller is reponsible for providing a ‘?’ to indicate the start of the query string portion of the URL, as well as proper URL escaping.   Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The structure of the response is determined by the chosen search engine and parameters provided to it.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types11.html#Types.OctetStream" title="Types.OctetStream">Types.OctetStream</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4320)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4321)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4322)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4323)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4324)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified queryEngine does not exist (errorCode=404, detailCode=4325)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id18">
<p class="admonition-title">Todo</p>
<p>Example for CNRead.query</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRead.resolve">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/resolve/{id}</span></code> <br/> Returns a list of nodes (MNs or CNs) known to hold copies of the object identified by <em>id</em>. The object resolution process is intended to provide a simple mechanism for a client to discover from which node(s) a particular object may be retrieved. Details about method interfaces (i.e. REST URLs) exposed by a particular node can be determined by examining the response from the <em>node</em> collection. For convenience, the <a class="reference internal" href="MN_APIs.html#MNRead.get" title="MNRead.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">MNRead.get()</span></code></a> URL is included in the response as is the base URL of the node REST services.</p>
<p>Note also that the same functionality as <em>resolve()</em> can be implemented by retrieving a copy of the system metadata for the object and utilizing the node registry to discover the base URL from which the client can construct the <em>get()</em> URL. Resolve is provided for efficiency since the response size is much smaller.</p>
<p>Resolve will return a HTTP status of 303 (see other) on success. The HTTP header “Location” MUST be set, and it’s value SHOULD be the full get() URL for retrieving the object from the first location in the resolve response.</p>
<p>v2.0: The supplied identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or a <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>. If the identifier is a SID, then resolution is for the latest version of an object (i.e. the head of the obsolescence chain).</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/36_uc.html"><span class="doc">UC36</span></a>, <a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/resolve/{id}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier being resolved. May be either a PID or a SID, the latter acting as if called with the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of nodes known to contain copies of the target object, plus the URLs known to resolve to the node get methods.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.ObjectLocationList" title="Types.ObjectLocationList">Types.ObjectLocationList</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4130)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4150)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4120)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – There is no object identified by the given identifier (errorCode=404, detailCode=4140)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4131)</p></li>
</ul>
</dd>
</dl>
<p><strong>Examples</strong></p>
<p>XML (default) in response to <code class="docutils literal notranslate"><span class="pre">Accept:</span> <span class="pre">text/xml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Accept: text/xml&quot;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cn</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="n">resolve</span><span class="o">/</span><span class="mi">1234</span>
<span class="ow">or</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Accept: */*&quot;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cn</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="n">resolve</span><span class="o">/</span><span class="mi">1234</span>

<span class="o">&lt;</span><span class="n">objectLocationList</span> <span class="n">xmlns</span><span class="p">:</span><span class="n">d1</span><span class="o">=</span><span class="s2">&quot;http://ns.dataone.org/service/types/v1&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">identifier</span><span class="o">&gt;</span><span class="mi">1234</span><span class="o">&lt;/</span><span class="n">identifier</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">objectLocation</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span><span class="n">mn1</span><span class="o">&lt;/</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">baseURL</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mn1</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mn</span><span class="o">&lt;/</span><span class="n">baseURL</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">v1</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">url</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mn1</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mn</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="mi">1234</span><span class="o">&lt;/</span><span class="n">url</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">objectLocation</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">objectLocation</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span><span class="n">mn2</span><span class="o">&lt;/</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">baseURL</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mn2</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mn</span><span class="o">&lt;/</span><span class="n">baseURL</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">v1</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">url</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mn2</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">some_base</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="mi">1234</span><span class="o">&lt;/</span><span class="n">url</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">objectLocation</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">objectLocation</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span><span class="n">cn1</span><span class="o">&lt;/</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">baseURL</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cn1</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mn</span><span class="o">&lt;/</span><span class="n">baseURL</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">v1</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">url</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cn1</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">cn</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="mi">1234</span><span class="o">&lt;/</span><span class="n">url</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">objectLocation</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">objectLocation</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span><span class="n">cn2</span><span class="o">&lt;/</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">baseURL</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cn2</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mn</span><span class="o">&lt;/</span><span class="n">baseURL</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">v1</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">url</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cn2</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">cn</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="mi">1234</span><span class="o">&lt;/</span><span class="n">url</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">objectLocation</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">objectLocation</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span><span class="n">cn3</span><span class="o">&lt;/</span><span class="n">nodeIdentifier</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">baseURL</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cn3</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mn</span><span class="o">&lt;/</span><span class="n">baseURL</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">v1</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">url</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cn3</span><span class="o">.</span><span class="n">dataone</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">cn</span><span class="o">/</span><span class="nb">object</span><span class="o">/</span><span class="mi">1234</span><span class="o">&lt;/</span><span class="n">url</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">objectLocation</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">objectLocationList</span><span class="o">&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRead.search">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">queryType</span></em>, <em class="sig-param"><span class="n">query</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.search" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/search/{queryType}/{query}</span></code> <br/> Search the metadata catalog and return identifiers of metadata records that match the criteria.</p>
<p>Search may be implemented by more than one type of search engine. The queryType parameter indicates which search engine should be targeted. The value and form of <em>query</em> is determined by the search engine.</p>
<p>Currently supported search engines include: “solr”</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/02_uc.html"><span class="doc">UC02</span></a>, <a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/search/{queryType}/{query}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>queryType</strong> (<em>string</em>) – Indicates which search engine will be used to handle the query. Currently supported search engines include: “SOLR”. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>query</strong> (<em>string</em>) – The remainder of the URL is passed verbatim to the respective search engine implementation. Hence it may contain additional path elements and query elements as determined by the functionality of the search engine. The caller is reponsible for providing a ‘?’ to indicate the start of the query string portion of the URL, as well as proper URL escaping.   Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of objects that match the specified search criteria</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.ObjectList" title="Types.ObjectList">Types.ObjectList</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4290)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4310)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4280)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4300)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4281)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id19">
<p class="admonition-title">Todo</p>
<p>Example for CNRead.search</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRead.synchronize">
<code class="sig-prename descclassname">CNRead.</code><code class="sig-name descname">synchronize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRead.synchronize" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/synchronize</span></code> <br/> Indicates to the CN that a new or existing object identified by PID requires synchronization. Note that this operation is asynchronous, a successful return indicates that the synchronization task was successfully queued.</p>
<p>This method may be called by any Member Node for new content or the authoritative Member Node for updates to existing content.</p>
<p>The CN will schedule the synchronization task which will then be processed in the same way as content changes identified through the listObjects polling mechanism.</p>
<p>v2.0: This method was added to the Version 2.0 API.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/synchronize</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the synchronization request was successfully queued, otherwise False</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4960)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4961)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4962)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4963)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id20">
<p class="admonition-title">Todo</p>
<p>Example for CNRead.synchronize</p>
</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="view-api">
<h2><a class="toc-backref" href="#id48">View API</a><a class="headerlink" href="#view-api" title="Permalink to this headline">¶</a></h2>
<p>View operations to see formatted versions of metadata and data for CNs.</p>
<p>The <em>CNView</em> API implements methods that enable viewing content
on a <a class="reference internal" href="../glossary.html#term-Coordinating-Node"><span class="xref std std-term">Coordinating Node</span></a>. Like the MNView service, the CNView service
provides a transformed view of a metadata file, data file, or package.  The
CNView service provides a default view for all content, and may choose to
redirect a review request to the authoritative Member Node for a given PID.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNView.listViews" title="CNView.listViews"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listViews</span></code></a>(session)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/views</span></code> <br/> Provides a list of usable themes for rendering content in a view, including a required ‘default’ theme.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNView.view" title="CNView.view"><code class="xref py py-obj docutils literal notranslate"><span class="pre">view</span></code></a>(session, theme, id)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/views/{theme}/{id}</span></code> <br/> Provides a formatted view of an object (science metadata, data, resource, or other) using the given named theme.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-CNView"></span><dl class="py function">
<dt id="CNView.listViews">
<code class="sig-prename descclassname">CNView.</code><code class="sig-name descname">listViews</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNView.listViews" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/views</span></code> <br/> Provides a list of usable themes for rendering content in a view, including a required ‘default’ theme. The list of themes is provided as an OptionList, where the option key should be used as the theme name in calls to MNView.view, and the description provides a human readable description of what will be returned fo rthat theme.</p>
<p>v2.0: This method was added to the Version 2.0 API.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/views</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of available themes that can be used with the MNView.view service.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types2.html#v2_0.Types.OptionList" title="v2_0.Types.OptionList">Types.OptionList</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2860)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2861)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=2862)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=2863)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2864)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id21">
<p class="admonition-title">Todo</p>
<p>Example for CNView.listViews</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNView.view">
<code class="sig-prename descclassname">CNView.</code><code class="sig-name descname">view</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">theme</span></em>, <em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNView.view" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/views/{theme}/{id}</span></code> <br/> Provides a formatted view of an object (science metadata, data, resource, or other) using the given named theme.</p>
<p>The service <a class="reference internal" href="#CNView.view" title="CNView.view"><code class="xref py py-func docutils literal notranslate"><span class="pre">CNView.view()</span></code></a> operation will implement at least one {theme} named ‘default’ to provide a standard (possibly minimalistic) view of the content in HTML format. In addition, a CN may redirect a client to the view service of the authoritative Member Node for a PID if that node has implemented the <a class="reference internal" href="MN_APIs.html#MNView.view" title="MNView.view"><code class="xref py py-func docutils literal notranslate"><span class="pre">MNView.view()</span></code></a> service and implements a compatible theme.</p>
<p>If the {theme} parameter is not recognized, the service must render the object using the default theme rather than throwing an error.  Note that the return type of Types.OctetStream requires that the consuming client has a priori knowledge of the theme being returned (like HTML). Response headers must include the correct mime-type of the view being returned.</p>
<p>v2.0: This method was added to the Version 2.0 API.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/views/{theme}/{id}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>theme</strong> (<em>string</em>) – Indicates which themed view will be used to handle the query. All implementations must support a ‘default’ HTML theme, but are free to implement additional themes that return both HTML and non-HTML responses. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier of the object to render in a view. May be a PID or a SID, the latter acting as if called with the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Any return type is allowed, including application/octet-stream, but the format of the response should be specialized by the requested theme.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types11.html#Types.OctetStream" title="Types.OctetStream">Types.OctetStream</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2850)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2851)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=2852)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=2853)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2854)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified pid does not exist. (errorCode=404, detailCode=2855)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id22">
<p class="admonition-title">Todo</p>
<p>Example for CNView.view</p>
</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="authorization-api">
<h2><a class="toc-backref" href="#id49">Authorization API</a><a class="headerlink" href="#authorization-api" title="Permalink to this headline">¶</a></h2>
<p>Methods for authorization and access control.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNAuthorization.isAuthorized" title="CNAuthorization.isAuthorized"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isAuthorized</span></code></a>(session, id, action)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/isAuthorized/{id}?action={action}</span></code> <br/> Test if the user identified by the provided token has authorization for operation on the specified object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNAuthorization.setAccessPolicy" title="CNAuthorization.setAccessPolicy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setAccessPolicy</span></code></a>(session, id, accessPolicy, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accessRules/{id}</span></code> <br/> Sets the access permissions for an object identified by <em>id</em>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNAuthorization.setRightsHolder" title="CNAuthorization.setRightsHolder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setRightsHolder</span></code></a>(session, id, userId, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/owner/{id}</span></code> <br/> Changes ownership (RightsHolder) of the specified object to the <a class="reference internal" href="../glossary.html#term-subject"><span class="xref std std-term">subject</span></a> specified by <cite>userId</cite></p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-CNAuthorization"></span><dl class="py function">
<dt id="CNAuthorization.isAuthorized">
<code class="sig-prename descclassname">CNAuthorization.</code><code class="sig-name descname">isAuthorized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em>, <em class="sig-param"><span class="n">action</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNAuthorization.isAuthorized" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/isAuthorized/{id}?action={action}</span></code> <br/> Test if the user identified by the provided token has authorization for operation on the specified object.</p>
<p>A successful operation is indicated by a return HTTP status of 200.</p>
<p>Failure is indicated by an exception such as <code class="xref py py-exc docutils literal notranslate"><span class="pre">NotAuthorized</span></code> being returned.</p>
<p>A successful response is indicated by a response HTTP status of 200. The body of the response is arbitrary and SHOULD
be ignored by the caller.</p>
<p>If the action is not authorized, then a <code class="xref py py-exc docutils literal notranslate"><span class="pre">NotAuthorized</span></code> exception MUST be raised.</p>
<p>v2.0: The supplied identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or a <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/01_uc.html"><span class="doc">UC01</span></a>, <a class="reference internal" href="../design/UseCases/02_uc.html"><span class="doc">UC02</span></a>, <a class="reference internal" href="../design/UseCases/36_uc.html"><span class="doc">UC36</span></a>, <a class="reference internal" href="../design/UseCases/37_uc.html"><span class="doc">UC37</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/isAuthorized/{id}?action={action}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifer of the resource for which access is being checked. May be either a PID or a
SID, the latter returning results as if called with the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>action</strong> (<a class="reference internal" href="Types.html#Types.Permission" title="Types.Permission"><em>Types.Permission</em></a>) – The type of operation which is being requested for the given identifier. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the operation is allowed</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>boolean</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=1760)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=1840)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – (errorCode=404, detailCode=1800)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – This error is raised if the request comes from a black listed source (e.g. a temporary
    block may be imposed on a source that calls this method too many times within some time interval) (errorCode=401, detailCode=1820)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=1780)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=1761)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id23">
<p class="admonition-title">Todo</p>
<p>Example for CNAuthorization.isAuthorized</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNAuthorization.setAccessPolicy">
<code class="sig-prename descclassname">CNAuthorization.</code><code class="sig-name descname">setAccessPolicy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em>, <em class="sig-param"><span class="n">accessPolicy</span></em>, <em class="sig-param"><span class="n">serialVersion</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNAuthorization.setAccessPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accessRules/{id}</span></code> <br/> Sets the access permissions for an object identified by <em>id</em>.</p>
<p>Triggers a change to the system metadata modified time stamp.</p>
<p>Successful completion of this operation is indicated by a HTTP response status code of 200.</p>
<p>Unsuccessful completion of this operation MUST be indicated by returning an appropriate exception such as <code class="xref py py-exc docutils literal notranslate"><span class="pre">NotAuthorized</span></code>.</p>
<p>v2.0: The supplied identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or a <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accessRules/{id}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The object for which access control is being updated. May be either a PID or a SID, the
latter acting on the HEAD PID only. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>accessPolicy</strong> (<a class="reference internal" href="Types.html#Types.AccessPolicy" title="Types.AccessPolicy"><em>Types.AccessPolicy</em></a>) – The desired privileges to be assigned to the object. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>serialVersion</strong> (<em>unsigned long</em>) – The serialVersion of the system metadata that is the intended target for the change. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the operation succeeds, otherwise false.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>boolean</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – The supplied token is invalid (errorCode=401, detailCode=4410)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4430)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified object does not exist in the DataONE system (errorCode=404, detailCode=4400)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The <a class="reference internal" href="../glossary.html#term-Subject"><span class="xref std std-term">Subject</span></a> does not have permission to alter access control rules for the object. (errorCode=401, detailCode=4420)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4401)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4402)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.VersionMismatch" title="Exceptions.VersionMismatch"><strong>Exceptions.VersionMismatch</strong></a> – The serialVersion supplied with the request does not match the serialVersion of the target (errorCode=409, detailCode=4403)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id24">
<p class="admonition-title">Todo</p>
<p>Example for CNAuthorization.setAccessPolicy</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNAuthorization.setRightsHolder">
<code class="sig-prename descclassname">CNAuthorization.</code><code class="sig-name descname">setRightsHolder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em>, <em class="sig-param"><span class="n">userId</span></em>, <em class="sig-param"><span class="n">serialVersion</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNAuthorization.setRightsHolder" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/owner/{id}</span></code> <br/> Changes ownership (RightsHolder) of the specified object to the <a class="reference internal" href="../glossary.html#term-subject"><span class="xref std std-term">subject</span></a> specified by <cite>userId</cite></p>
<p>v2.0: The supplied identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or a <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/owner/{id}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier of the object to be modified. May be either a PID or a SID, the latter acting on
the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>userId</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The subject that will be taking ownership of the specified object. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>serialVersion</strong> (<em>unsigned long</em>) – The serialVersion of the system metadata that is the intended target for the change. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Identifier of the object that was modified</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier">Types.Identifier</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4490)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4480)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied subject does not have permission to change ownership of the object (errorCode=401, detailCode=4440)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified object does not exist in the DataONE system (errorCode=404, detailCode=4460)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4441)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4442)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.VersionMismatch" title="Exceptions.VersionMismatch"><strong>Exceptions.VersionMismatch</strong></a> – The serialVersion supplied with the request does not match the serialVersion of the target (errorCode=409, detailCode=4443)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id25">
<p class="admonition-title">Todo</p>
<p>Example for CNAuthorization.setRightsHolder</p>
</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="identity-api">
<h2><a class="toc-backref" href="#id50">Identity API</a><a class="headerlink" href="#identity-api" title="Permalink to this headline">¶</a></h2>
<p>Methods for account management and identity mapping.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNIdentity.confirmMapIdentity" title="CNIdentity.confirmMapIdentity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">confirmMapIdentity</span></code></a>(session, subject)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/pendingmap/{subject}</span></code> <br/> Confirms a previously initiated identity mapping.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNIdentity.createGroup" title="CNIdentity.createGroup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createGroup</span></code></a>(session, group)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/groups</span></code> <br/> Create a group with the given name.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNIdentity.denyMapIdentity" title="CNIdentity.denyMapIdentity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">denyMapIdentity</span></code></a>(session, subject)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/accounts/pendingmap/{subject}</span></code> <br/> Denies a previously initiated identity mapping.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNIdentity.getPendingMapIdentity" title="CNIdentity.getPendingMapIdentity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getPendingMapIdentity</span></code></a>(session, subject)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts/pendingmap/{subject}</span></code> <br/> Gets the SubjectInfo of a previously initiated identity mapping.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNIdentity.getSubjectInfo" title="CNIdentity.getSubjectInfo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getSubjectInfo</span></code></a>(session, subject)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts/{subject}</span></code> <br/> Get the information about a Person (their equivalent identities, and the Groups to which they belong) or the Group (including members).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNIdentity.listSubjects" title="CNIdentity.listSubjects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">listSubjects</span></code></a>(session, query, status, start, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts?query={query}[&amp;status={status}&amp;start={start}&amp;count={count}]</span></code> <br/> List the subjects, including users, groups, and systems, that match search criteria.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNIdentity.mapIdentity" title="CNIdentity.mapIdentity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mapIdentity</span></code></a>(session, primarySubject, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts/map</span></code> <br/> Create a new mapping between the two identities, asserting that they represent the same subject.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNIdentity.registerAccount" title="CNIdentity.registerAccount"><code class="xref py py-obj docutils literal notranslate"><span class="pre">registerAccount</span></code></a>(session, person)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts</span></code> <br/> Create a new <a class="reference internal" href="../glossary.html#term-subject"><span class="xref std std-term">subject</span></a> in the DataONE system.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNIdentity.removeMapIdentity" title="CNIdentity.removeMapIdentity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">removeMapIdentity</span></code></a>(session, subject)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/accounts/map/{subject}</span></code> <br/> Removes a previously asserted identity mapping from the Subject in the Session to the Subject given by the parameter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNIdentity.requestMapIdentity" title="CNIdentity.requestMapIdentity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">requestMapIdentity</span></code></a>(session, subject)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts/pendingmap</span></code> <br/> Request a new mapping between the authenticated identity in the session and the given identity, asserting that they represent the same subject.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNIdentity.updateAccount" title="CNIdentity.updateAccount"><code class="xref py py-obj docutils literal notranslate"><span class="pre">updateAccount</span></code></a>(session, subject, person)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/{subject}</span></code> <br/> Update an existing <a class="reference internal" href="../glossary.html#term-subject"><span class="xref std std-term">subject</span></a> in the DataONE system.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNIdentity.updateGroup" title="CNIdentity.updateGroup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">updateGroup</span></code></a>(session, group)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/groups</span></code> <br/> Add members to the named group.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNIdentity.verifyAccount" title="CNIdentity.verifyAccount"><code class="xref py py-obj docutils literal notranslate"><span class="pre">verifyAccount</span></code></a>(session, subject)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/verification/{subject}</span></code> <br/> Verify that the Person data associated with this Subject is a true representation of the real world person.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-CNIdentity"></span><dl class="py function">
<dt id="CNIdentity.confirmMapIdentity">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">confirmMapIdentity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.confirmMapIdentity" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/pendingmap/{subject}</span></code> <br/> Confirms a previously initiated identity mapping. If subject A asserts that B is the same identity through <a class="reference internal" href="#CNIdentity.requestMapIdentity" title="CNIdentity.requestMapIdentity"><code class="xref py py-func docutils literal notranslate"><span class="pre">CNIdentity.requestMapIdentity()</span></code></a>, then this method is called by B to confirm that assertion.</p>
<p>A successful request is indicated by returning a HTTP status of 200.</p>
<p>A failed request MUST be indicated by returning an appropriate exception and setting the response HTTP status accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/pendingmap/{subject}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier to be used for equivalentIdentity. This Subject will not match the Subject named in the certificate. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the map was successfully created, false otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2390)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2370)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied principal does not have permission to map these two identities (errorCode=401, detailCode=2360)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified principal does not exist in the DataONE system, or the mapping between the subjects has no yet been initiated. (errorCode=404, detailCode=2340)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2361)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id26">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.confirmMapIdentity</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.createGroup">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">createGroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">group</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.createGroup" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/groups</span></code> <br/> Create a group with the given name.</p>
<p>Groups are lists of subjects that allow all members of the group to be referenced by listing solely the subject name of the group.  Group names must be unique within the DataONE system. Groups can only be modified by Subjects listed as rightsHolders.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/groups</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>group</strong> (<a class="reference internal" href="Types.html#Types.Group" title="Types.Group"><em>Types.Group</em></a>) – The Group to be created. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Subject of the group that was created.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject">Types.Subject</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2490)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2470)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied principal does not have permission to create a group (errorCode=401, detailCode=2460)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2461)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.IdentifierNotUnique" title="Exceptions.IdentifierNotUnique"><strong>Exceptions.IdentifierNotUnique</strong></a> – A group by this name already exists (errorCode=409, detailCode=2400)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id27">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.createGroup</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.denyMapIdentity">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">denyMapIdentity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.denyMapIdentity" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/accounts/pendingmap/{subject}</span></code> <br/> Denies a previously initiated identity mapping. If subject A asserts that B is the same identity through <a class="reference internal" href="#CNIdentity.requestMapIdentity" title="CNIdentity.requestMapIdentity"><code class="xref py py-func docutils literal notranslate"><span class="pre">CNIdentity.requestMapIdentity()</span></code></a>, then this method is called by B to deny that assertion.</p>
<p>A successful request is indicated by returning a HTTP status of 200.</p>
<p>A failed request MUST be indicated by returning an appropriate exception and setting the response HTTP status accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/accounts/pendingmap/{subject}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier to be used for equivalentIdentity. This Subject will not match the Subject named in the certificate. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the map was successfully created, false otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2390)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2370)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied principal does not have permission to map these two identities (errorCode=401, detailCode=2360)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified principal does not exist in the DataONE system, or the mapping between the subjects has no yet been initiated. (errorCode=404, detailCode=2340)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2361)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id28">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.denyMapIdentity</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.getPendingMapIdentity">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">getPendingMapIdentity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.getPendingMapIdentity" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts/pendingmap/{subject}</span></code> <br/> Gets the SubjectInfo of a previously initiated identity mapping.</p>
<p>A successful request is indicated by returning a HTTP status of 200.</p>
<p>A failed request MUST be indicated by returning an appropriate exception and setting the response HTTP status accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts/pendingmap/{subject}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier to be used for equivalentIdentity. This Subject will not match the Subject named in the certificate. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The SubjectInfo</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.SubjectInfo" title="Types.SubjectInfo">Types.SubjectInfo</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2390)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied principal does not have permission to get the SubjectInfo (errorCode=401, detailCode=2360)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified principal does not exist in the DataONE system, or the mapping between the subjects has no yet been initiated. (errorCode=404, detailCode=2340)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2361)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4961)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id29">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.getPendingMapIdentity</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.getSubjectInfo">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">getSubjectInfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.getSubjectInfo" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts/{subject}</span></code> <br/> Get the information about a Person (their equivalent identities, and the Groups to which they belong) or the Group (including members).</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/12_uc.html"><span class="doc">UC12</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts/{subject}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier of the Person or Group details to be returned.  Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The Person or Group details are contained in the returned SubjectList for the given Subject</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.SubjectInfo" title="Types.SubjectInfo">Types.SubjectInfo</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4560)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4561)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – Raised if the requested subject is not registered with the DataONE system (errorCode=404, detailCode=4564)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4563)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4564)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id30">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.getSubjectInfo</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.listSubjects">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">listSubjects</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">status</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">count</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.listSubjects" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts?query={query}[&amp;status={status}&amp;start={start}&amp;count={count}]</span></code> <br/> List the subjects, including users, groups, and systems, that match search criteria.</p>
<p>The list can be restricted to subjects whose identifier matches certain substrings, and the size of the resultset can be paged through.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/accounts?query={query}[&amp;status={status}&amp;start={start}&amp;count={count}]</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>query</strong> (<em>string</em>) – A query string criteria to be matched using a case-insensitive substring match against the identifier for the principal, the givenName or familyName of users, and the groupName of groups.  The function returns the union of all successful matches against these fields. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>status</strong> (<em>string</em>) – When provided, the status field can limit the returned list of Subjects to only those with the given status. Currently the ‘verified’ status is supported. Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>start</strong> (<em>integer</em>) – The starting record number for the records to be returned (default = 0). Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>count</strong> (<em>integer</em>) – The maximum number of entries that should be returned in the response. The Member Node may return fewer and the caller should check the <em>total</em> in the response to determine if further pages may be retrieved (default = 100). Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of people and groups that match the query.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.SubjectInfo" title="Types.SubjectInfo">Types.SubjectInfo</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2290)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2270)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=2260)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2261)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=2262)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id31">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.listSubjects</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.mapIdentity">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">mapIdentity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">primarySubject</span></em>, <em class="sig-param"><span class="n">secondarySubject</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.mapIdentity" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts/map</span></code> <br/> Create a new mapping between the two identities, asserting that they represent the same subject.</p>
<p>Mapping identities with this method requires explicit authorization for the user given in the Session object. The caller must have made sure that the primary and secondary identities represent one and the same individual.</p>
<p>Successful completion of the request is indicated by returning a HTTP status of 200.</p>
<p>A failed request MUST be indicated by returning an appropriate exception and setting the response HTTP status accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts/map</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>primarySubject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier that will have a mapped identity to the other given subject.  Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>secondarySubject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier that will have a mapped identity to the other given subject.  Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the mapping was successfully initiated, false otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2390)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2370)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied principal does not have permission to map these two identities (errorCode=401, detailCode=2360)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified principal does not exist in the DataONE system (errorCode=404, detailCode=2340)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2361)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=2342)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.IdentifierNotUnique" title="Exceptions.IdentifierNotUnique"><strong>Exceptions.IdentifierNotUnique</strong></a> – The subject of the session and the provided subject are the same (errorCode=409, detailCode=2343)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id32">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.mapIdentity</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.registerAccount">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">registerAccount</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">person</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.registerAccount" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts</span></code> <br/> Create a new <a class="reference internal" href="../glossary.html#term-subject"><span class="xref std std-term">subject</span></a> in the DataONE system.</p>
<p>Note that there should probably be a lot more metadata captured about the new user, and there should be a mechanism for specifying the default access control rules for the new account.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>person</strong> (<a class="reference internal" href="Types.html#Types.Person" title="Types.Person"><em>Types.Person</em></a>) – Information about the Person to be registered with the account, including the real name and email address for the individual.  The Subject with the Person must match the subject of the X.509 certificate associated with the authenticated SSL session via client-side authentication, and must not have been registered previously. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The new subject in the DataONE system.  This may be a simple identifier.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject">Types.Subject</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4520)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.IdentifierNotUnique" title="Exceptions.IdentifierNotUnique"><strong>Exceptions.IdentifierNotUnique</strong></a> – The chosen identity already exists in the system (errorCode=409, detailCode=4521)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidCredentials" title="Exceptions.InvalidCredentials"><strong>Exceptions.InvalidCredentials</strong></a> – Raised if the supplied credentials are invalid, such as an invalid X.509 certificate. (errorCode=401, detailCode=4522)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4523)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4524)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The subject of the session does not match the subject of the person. (errorCode=401, detailCode=4525)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4526)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<p>Create an account in the DataONE staging environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat person.xml

&lt;ns2:person xmlns:ns2<span class="o">=</span><span class="s2">&quot;http://ns.dataone.org/service/types/v1&quot;</span>&gt;
  &lt;subject&gt;http://orcid.org/0000-0002-6513-4996&lt;/subject&gt;
  &lt;givenName&gt;David&lt;/givenName&gt;
  &lt;familyName&gt;Vieglais&lt;/familyName&gt;
  &lt;equivalentIdentity&gt;CN<span class="o">=</span>Dave Vieglais A335,O<span class="o">=</span>Google,C<span class="o">=</span>US,DC<span class="o">=</span>cilogon,DC<span class="o">=</span>org&lt;/equivalentIdentity&gt;
  &lt;verified&gt;true&lt;/verified&gt;
&lt;/ns2:person&gt;

$ curl -s <span class="se">\</span>
    -F <span class="nv">person</span><span class="o">=</span>@person.xml <span class="se">\</span>
    -X POST <span class="se">\</span>
    -w <span class="s2">&quot;Status: %{http_code}\n&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;https://cn-stage.test.dataone.org/cn/v2/accounts&quot;</span>
Status: <span class="m">200</span>
</pre></div>
</div>
<p>Verify that the account was created using the <a class="reference internal" href="#CNIdentity.getSubjectInfo" title="CNIdentity.getSubjectInfo"><code class="xref py py-func docutils literal notranslate"><span class="pre">getSubjectInfo()</span></code></a> method.</p>
<p>Legitimacy of the account must be verified with the <a class="reference internal" href="#CNIdentity.verifyAccount" title="CNIdentity.verifyAccount"><code class="xref py py-func docutils literal notranslate"><span class="pre">verifyAccount()</span></code></a> method.</p>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.removeMapIdentity">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">removeMapIdentity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.removeMapIdentity" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/accounts/map/{subject}</span></code> <br/> Removes a previously asserted identity mapping from the Subject in the Session to the Subject given by the parameter. The reciprocol mapping entry is also removed.</p>
<p>A successful request is indicated by returning a HTTP status of 200.</p>
<p>A failed request MUST be indicated by returning an appropriate exception and setting the response HTTP status accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">/accounts/map/{subject}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier to be used for equivalentIdentity. This Subject will not match the Subject named in the certificate. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the map was successfully created, false otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2390)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2370)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied principal does not have permission to map these two identities (errorCode=401, detailCode=2360)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified principal does not exist in the DataONE system, or the mapping between the subjects has no yet been initiated. (errorCode=404, detailCode=2340)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2361)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id33">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.removeMapIdentity</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.requestMapIdentity">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">requestMapIdentity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.requestMapIdentity" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts/pendingmap</span></code> <br/> Request a new mapping between the authenticated identity in the session and the given identity, asserting that they represent the same subject.</p>
<p>Mapping identities is a two-step process wherein a map request is made by a primary Subject and a subsequent (confirmation) map request is made by the secondary Subject. This ensures that mappings are performed only by those that have authority to do so.</p>
<p>Successful completion of the request is indicated by returning a HTTP status of 200.</p>
<p>A failed request MUST be indicated by returning an appropriate exception and setting the response HTTP status accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/accounts/pendingmap</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier to be used for equivalentIdentity. This Subject will not match the Subject named in the certificate. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the mapping was successfully initiated, false otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2390)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2370)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied principal does not have permission to map these two identities (errorCode=401, detailCode=2360)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified principal does not exist in the DataONE system (errorCode=404, detailCode=2340)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2361)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=2342)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.IdentifierNotUnique" title="Exceptions.IdentifierNotUnique"><strong>Exceptions.IdentifierNotUnique</strong></a> – The subject of the session and the provided subject are the same (errorCode=409, detailCode=2343)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id34">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.requestMapIdentity</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.updateAccount">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">updateAccount</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em>, <em class="sig-param"><span class="n">person</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.updateAccount" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/{subject}</span></code> <br/> Update an existing <a class="reference internal" href="../glossary.html#term-subject"><span class="xref std std-term">subject</span></a> in the DataONE system. The target subject is determined from subject provided in the URL.</p>
<p>The use calling this method must have write access to the account details.</p>
<p>Note that there should be a policy for verifying the details that change via this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/16_uc.html"><span class="doc">UC16</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/{subject}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The subject of the person being updated. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>person</strong> (<a class="reference internal" href="Types.html#Types.Person" title="Types.Person"><em>Types.Person</em></a>) – New information about the Person. The subject of the Person cannot be updated with this method and must match the subject of the X.509 certificate associated with the authenticated SSL session via client-side authentication. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The Subject in the DataONE system that was updated.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject">Types.Subject</a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4530)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidCredentials" title="Exceptions.InvalidCredentials"><strong>Exceptions.InvalidCredentials</strong></a> – Raised if the supplied credentials are invalid, such as an invalid X.509 certificate. (errorCode=401, detailCode=4531)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4532)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4533)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – Raised if the subject of the session does not match that of the person. (errorCode=401, detailCode=4534)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – Raised if the account does not exist. (errorCode=404, detailCode=4535)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4536)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id35">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.updateAccount</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.updateGroup">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">updateGroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">group</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.updateGroup" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/groups</span></code> <br/> Add members to the named group.</p>
<p>Group members can be modified only by the original creator of the group, otherwise a NotAuthorized exception is thrown.  Group members are provided as a list of subjects that replace the group membership.</p>
<p>Successful completion of this operation is indicated by a HTTP response status code of 200.</p>
<p>Unsuccessful completion of this operation MUST be indicated by returning an appropriate exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/groups</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>group</strong> (<a class="reference internal" href="Types.html#Types.Group" title="Types.Group"><em>Types.Group</em></a>) – The new Group object that will replace the old Group. The Group.Subject must match the groupName and an update cannot modify this value. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the group that was modified successfully, false otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=2590)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=2570)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The supplied principal does not have permission to add to a group (errorCode=401, detailCode=2560)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified group does not exist in the DataONE system (errorCode=404, detailCode=2540)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=2561)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=2542)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id36">
<p class="admonition-title">Todo</p>
<p>Example for CNIdentity.updateGroup</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNIdentity.verifyAccount">
<code class="sig-prename descclassname">CNIdentity.</code><code class="sig-name descname">verifyAccount</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">subject</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNIdentity.verifyAccount" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/verification/{subject}</span></code> <br/> Verify that the Person data associated with this Subject is a true representation of the real world person.</p>
<p>This service can only be called by users who have an administrative role for the domain of users in question.</p>
<p>A successful completion of this operation is indicated by returning a HTTP status of 200.</p>
<p>An exeption MUST be returned if the account verification is not successful.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/accounts/verification/{subject}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>subject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The Subject identifier of the Person to be verified.  After this service is called for a subject by an authorized user, the account is marked as verified by this user. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the account verification succeeds, otherwise false.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4540)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – This error is raised if the person attempting to validate the account is not authorized to verify accounts. (errorCode=401, detailCode=4541)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4542)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4543)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4544)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<p>Verify the subject <code class="docutils literal notranslate"><span class="pre">http://orcid.org/0000-0002-6513-4996</span></code>.</p>
<p>Note that the subject appears as a URL path element, and so must be escaped
appropriately in the request.</p>
<p>Note also that the call must be made by a subject with administrative
privileges. In this case, the client certificate of a Coordinating Node
is used.</p>
<p>The response status code of <code class="docutils literal notranslate"><span class="pre">200</span></code> indicates the call was successful. An exception
would be returned with a corresponding status code if the call failed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo curl -s <span class="se">\</span>
    --cert private/urn_node_CNUCSB1.pem <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -w <span class="s2">&quot;Status: %{http_code}\n&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;https://cn.dataone.org/cn/v2/accounts/verification/http%3A%2F%2Forcid.org%2F0000-0002-6513-4996&quot;</span>
  Status: <span class="m">200</span>
</pre></div>
</div>
<p>Example of a failure (subject incorrect):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo curl -s <span class="se">\</span>
    --cert private/urn_node_CNUCSB1.pem <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -w <span class="s2">&quot;Status: %{http_code}\n&quot;</span> <span class="se">\</span>
    <span class="s2">&quot;https://cn.dataone.org/cn/v2/accounts/verification/http%3A%2F%2Forcid.org%2F0000-0002-6513&quot;</span>
  &lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span>?&gt;
  &lt;error <span class="nv">detailCode</span><span class="o">=</span><span class="s2">&quot;4540&quot;</span> <span class="nv">errorCode</span><span class="o">=</span><span class="s2">&quot;500&quot;</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;ServiceFailure&quot;</span>&gt;
     &lt;description&gt;Could not verify account: <span class="o">[</span>LDAP: error code <span class="m">32</span> - No Such Object<span class="o">]</span>&lt;/description&gt;
  &lt;/error&gt;
  Status: <span class="m">500</span>
</pre></div>
</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="replication-api">
<h2><a class="toc-backref" href="#id51">Replication API</a><a class="headerlink" href="#replication-api" title="Permalink to this headline">¶</a></h2>
<p>Supports operations for replication of content between Member Nodes.</p>
<p>The Data Replication API operates in conjunction with the
<a class="reference internal" href="MN_APIs.html#module-MNReplication" title="MNReplication"><code class="xref py py-mod docutils literal notranslate"><span class="pre">MNReplication</span></code></a> API to assist with the replication of data and
science metadata content between Member Nodes to ensure that copies of data
and metadata can be retrieved from more than one Member Node where possible.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNReplication.deleteReplicationMetadata" title="CNReplication.deleteReplicationMetadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deleteReplicationMetadata</span></code></a>(session, pid, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/removeReplicaMetadata/{pid}</span></code> <br/> Removes the replication information for the specified node from the object system metadata identified by <em>pid</em>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNReplication.isNodeAuthorized" title="CNReplication.isNodeAuthorized"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isNodeAuthorized</span></code></a>(session, targetNodeSubject, pid)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/replicaAuthorizations/{pid}?targetNodeSubject={targetNodeSubject}</span></code> <br/> Verifies that a replication event was initiated by a CN by comparing the target node’s identifiying subject with a known list of scheduled replication tasks.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNReplication.setReplicationPolicy" title="CNReplication.setReplicationPolicy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setReplicationPolicy</span></code></a>(session, id, policy, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaPolicies/{id}</span></code> <br/> Updates the replication policy entry for an object by updating the system metadata.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNReplication.setReplicationStatus" title="CNReplication.setReplicationStatus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setReplicationStatus</span></code></a>(session, pid, nodeRef, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaNotifications/{pid}</span></code> <br/> Update the replication status of the system metadata, ensuring that the change is appropriate for the given state of system metadata.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNReplication.updateReplicationMetadata" title="CNReplication.updateReplicationMetadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">updateReplicationMetadata</span></code></a>(session, pid, …)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaMetadata/{pid}</span></code> <br/> Replaces the replica with matching nodeRef in the system metadata of the specified object.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-CNReplication"></span><dl class="py function">
<dt id="CNReplication.deleteReplicationMetadata">
<code class="sig-prename descclassname">CNReplication.</code><code class="sig-name descname">deleteReplicationMetadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">nodeId</span></em>, <em class="sig-param"><span class="n">serialVersion</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNReplication.deleteReplicationMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/removeReplicaMetadata/{pid}</span></code> <br/> Removes the replication information for the specified node from the object system metadata identified by <em>pid</em>.</p>
<p>Removal of replication metadata is necessary if the Member Node goes offline permanently or for an extended period, or when it is deeemed prudent to migrate an object from one node to another to address resource management issues.</p>
<p>This method can be only called by Coordinating Nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/removeReplicaMetadata/{pid}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier of the object whose replication metadata is being modified.  Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>nodeId</strong> (<a class="reference internal" href="Types.html#Types.NodeReference" title="Types.NodeReference"><em>Types.NodeReference</em></a>) – The identifier of the node replication information that is being removed from the system metadata record. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>serialVersion</strong> (<em>unsigned long</em>) – The <a class="reference internal" href="Types.html#Types.SystemMetadata.serialVersion" title="Types.SystemMetadata.serialVersion"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Types.SystemMetadata.serialVersion</span></code></a> of the system metadata being updated. This MUST match the latest version of system metadata available for the object on the Coordinating Node. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the replication metadata was successfully deleted.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The method functionality if not fully implemented (errorCode=501, detailCode=4950)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – An internal server error occurred that prevented the operation from completing. (errorCode=500, detailCode=4951)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The request parameters are malformed (errorCode=400, detailCode=4952)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – The supplied session is invalid (errorCode=401, detailCode=4953)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The object identified by <em>pid</em> or the node reference specified by <em>nodeId</em> could not be located in the system metadata for the object. (errorCode=404, detailCode=4956)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The subject identified by the <em>session</em> information does not have appropriate priviledges for modifiying the content or accessing the service. (errorCode=401, detailCode=4954)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.VersionMismatch" title="Exceptions.VersionMismatch"><strong>Exceptions.VersionMismatch</strong></a> – The <em>serialVersion</em> does not match the current <a class="reference internal" href="Types.html#Types.SystemMetadata.serialVersion" title="Types.SystemMetadata.serialVersion"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Types.SystemMetadata.serialVersion</span></code></a> value of the object system metadata. (errorCode=409, detailCode=4955)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id37">
<p class="admonition-title">Todo</p>
<p>Example for CNReplication.deleteReplicationMetadata</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNReplication.isNodeAuthorized">
<code class="sig-prename descclassname">CNReplication.</code><code class="sig-name descname">isNodeAuthorized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">targetNodeSubject</span></em>, <em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNReplication.isNodeAuthorized" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/replicaAuthorizations/{pid}?targetNodeSubject={targetNodeSubject}</span></code> <br/> Verifies that a replication event was initiated by a CN by comparing the target node’s identifiying subject with a known list of scheduled replication tasks.</p>
<p>Successful completion of the operation is indicated by returning a HTTP status of 200.</p>
<p>Failure of the operation MUST be indicated by returning an appropriate exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/replicaAuthorizations/{pid}?targetNodeSubject={targetNodeSubject}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>targetNodeSubject</strong> (<a class="reference internal" href="Types.html#Types.Subject" title="Types.Subject"><em>Types.Subject</em></a>) – The subject that identifies the target node, with a value extracted from the X.509 certificate passed in during the call to MNReplication.replicate(). Transmitted as a URL query parameter, and so must be escaped accordingly.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier of the object to be replicated. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True on success</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The method functionality is not implemented. (errorCode=501, detailCode=4870)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – Replication of PID is not authorized for the subject listed. (errorCode=401, detailCode=4871)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – An internal server error occurred. (errorCode=500, detailCode=4872)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The replication request is invalid. (errorCode=400, detailCode=4873)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The PID does not exist as an existing object. (errorCode=404, detailCode=4874)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – The session information is invalid. (errorCode=401, detailCode=4875)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id38">
<p class="admonition-title">Todo</p>
<p>Example for CNReplication.isNodeAuthorized</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNReplication.setReplicationPolicy">
<code class="sig-prename descclassname">CNReplication.</code><code class="sig-name descname">setReplicationPolicy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">id</span></em>, <em class="sig-param"><span class="n">policy</span></em>, <em class="sig-param"><span class="n">serialVersion</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNReplication.setReplicationPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaPolicies/{id}</span></code> <br/> Updates the replication policy entry for an object by updating the system metadata.</p>
<p>Successful completion of the operation is indicated by returning a HTTP status of 200.</p>
<p>Failure of the operation MUST be indicated by returning an appropriate exception.</p>
<p>v2.0: The identifier may be a <a class="reference internal" href="../glossary.html#term-PID"><span class="xref std std-term">PID</span></a> or <a class="reference internal" href="../glossary.html#term-SID"><span class="xref std std-term">SID</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaPolicies/{id}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>id</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – The identifier of the policy being updated. May be either a PID or a SID, the latter acting only on the HEAD PID. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>policy</strong> (<a class="reference internal" href="Types.html#Types.ReplicationPolicy" title="Types.ReplicationPolicy"><em>Types.ReplicationPolicy</em></a>) – Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>serialVersion</strong> (<em>unsigned long</em>) – The serialVersion of the system metadata that is the intended target for the change. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True on success</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4880)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4881)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4882)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4883)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – (errorCode=404, detailCode=4884)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4885)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.VersionMismatch" title="Exceptions.VersionMismatch"><strong>Exceptions.VersionMismatch</strong></a> – The serialVersion supplied with the request does not match the serialVersion of the target (errorCode=409, detailCode=4886)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id39">
<p class="admonition-title">Todo</p>
<p>Example for CNReplication.setReplicationPolicy</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNReplication.setReplicationStatus">
<code class="sig-prename descclassname">CNReplication.</code><code class="sig-name descname">setReplicationStatus</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">nodeRef</span></em>, <em class="sig-param"><span class="n">status</span></em>, <em class="sig-param"><span class="n">failure</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNReplication.setReplicationStatus" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaNotifications/{pid}</span></code> <br/> Update the replication status of the system metadata, ensuring that the change is appropriate for the given state of system metadata.  For example, a MN can not change the status to <em>COMPLETED</em> unless the CN previously requested replication of the object and the replications status of the object (as indicated in the system metadata) is set to <em>QUEUED</em>.</p>
<p>Successful completion of this operation is indicated by a HTTP response status code of 200.</p>
<p>Unsuccessful completion of this operation MUST be indicated by returning an appropriate exception.</p>
<p>The nodeRef, status, and failure parameters are transmitted as part of the HTTP request body encoded as a MIME Multipart/form-data encoded payload.</p>
<p>This method can be only called by Coordinating Nodes and trusted Member Nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">Use Cases</dt>
<dd class="field-even"><p><a class="reference internal" href="../design/UseCases/09_uc.html"><span class="doc">UC09</span></a></p>
</dd>
<dt class="field-odd">REST URL</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaNotifications/{pid}</span></code></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Identifier of the object to be replicated between Member Nodes. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>nodeRef</strong> (<a class="reference internal" href="Types.html#Types.NodeReference" title="Types.NodeReference"><em>Types.NodeReference</em></a>) – Reference to the Node which made the setReplicationStatus call. If this is a Member Node, the checksum must be compared with that of the authoritative Member Node. If not, this step can be ignored as the call is not signifying a replication is complete. Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>status</strong> (<a class="reference internal" href="Types.html#Types.ReplicationStatus" title="Types.ReplicationStatus"><em>Types.ReplicationStatus</em></a>) – Replication status. See system metadata schema for possible values.  Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>failure</strong> (<em>Types.BaseException</em>) – A BaseException object or one of it’s subclasses, or null.  If the status is set to ‘failed’, this exception object can provide more detail. Appropriate sub-classes include InsufficientResource, NotAuthorized, ServiceFailure, etc. Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the operation is allowed and expected, otherwise an exception should be raised.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>boolean</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4700)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4701)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4710)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4720)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4730)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – (errorCode=404, detailCode=4740)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id40">
<p class="admonition-title">Todo</p>
<p>Example for CNReplication.setReplicationStatus</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNReplication.updateReplicationMetadata">
<code class="sig-prename descclassname">CNReplication.</code><code class="sig-name descname">updateReplicationMetadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">replicaMetadata</span></em>, <em class="sig-param"><span class="n">serialVersion</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNReplication.updateReplicationMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaMetadata/{pid}</span></code> <br/> Replaces the replica with matching nodeRef in the system metadata of the specified object.  Adds a new replica if the nodeRef of passed in Replica is not already present.  Changes the date sys meta modified.</p>
<p>Successful completion of the operation is indicated by returning a HTTP status of 200.</p>
<p>Failure of the operation MUST be indicated by returning an appropriate exception.</p>
<p>This method can be only called by Coordinating Nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, (2.0)</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/replicaMetadata/{pid}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>pid</strong> (<a class="reference internal" href="Types.html#Types.Identifier" title="Types.Identifier"><em>Types.Identifier</em></a>) – Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>replicaMetadata</strong> (<a class="reference internal" href="Types.html#Types.Replica" title="Types.Replica"><em>Types.Replica</em></a>) – Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
<li><p><strong>serialVersion</strong> (<em>unsigned long</em>) – The serialVersion of the system metadata that is the intended target for the change.  Transmitted as a UTF-8 String as a <em>Param part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True on success</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4850)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4851)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4852)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4853)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The specified pid does not exist (errorCode=404, detailCode=4854)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.VersionMismatch" title="Exceptions.VersionMismatch"><strong>Exceptions.VersionMismatch</strong></a> – The serialVersion supplied with the request does not match the serialVersion of the target (errorCode=409, detailCode=4855)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4856)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id41">
<p class="admonition-title">Todo</p>
<p>Example for CNReplication.updateReplicationMetadata</p>
</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="register-api">
<h2><a class="toc-backref" href="#id52">Register API</a><a class="headerlink" href="#register-api" title="Permalink to this headline">¶</a></h2>
<p>Register nodes and their capabilities, retrieve node list.</p>
<p>The register API methods are used to maintain a registry of nodes participating
in the DataONE infrastructure.</p>
<p>Note that the node registry is much the same as the Object collection with a
restriction on the returned object formats to be Member Nodes or Coordinating
Nodes. It may be prudent for the implementation of the registration API to
leverage the existing functionality of the object collection rather than
implementing a parallel data store. In this case, the “science metadata” could
be a DC description of the node, and the “data” might be the detailed
registration information including node capabilities, scheduling and so forth.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNRegister.getNodeCapabilities" title="CNRegister.getNodeCapabilities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getNodeCapabilities</span></code></a>(nodeid)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/node/{nodeid}</span></code> <br/> For retrieving the capabilities of the specified node if it is registered on the Coordinating Node being called.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#CNRegister.register" title="CNRegister.register"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register</span></code></a>(session, node)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/node</span></code> <br/> Register a new node in the system.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#CNRegister.updateNodeCapabilities" title="CNRegister.updateNodeCapabilities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">updateNodeCapabilities</span></code></a>(session, nodeid, node)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/node/{nodeid}</span></code> <br/> For updating the capabilities of the specified node.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-CNRegister"></span><dl class="py function">
<dt id="CNRegister.getNodeCapabilities">
<code class="sig-prename descclassname">CNRegister.</code><code class="sig-name descname">getNodeCapabilities</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nodeid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRegister.getNodeCapabilities" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/node/{nodeid}</span></code> <br/> For retrieving the capabilities of the specified node if it is registered on the Coordinating Node being called.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.Node" title="v2_0.Types.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.Node</span></code></a> has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/node/{nodeid}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nodeid</strong> (<a class="reference internal" href="Types.html#Types.NodeReference" title="Types.NodeReference"><em>Types.NodeReference</em></a>) – The identifier of the existing node entry being looked up. Transmitted as part of the URL path and must be escaped accordingly.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of :class`Types.Node` that contains the Node information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.Node" title="Types.Node">Types.Node</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The service is not implemented. (errorCode=501, detailCode=4826)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4827)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The request was malformed. (errorCode=400, detailCode=4828)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The requested nodeid is not available in the registry. (errorCode=404, detailCode=4829)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id42">
<p class="admonition-title">Todo</p>
<p>Example for CNRegister.getNodeCapabilities</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRegister.register">
<code class="sig-prename descclassname">CNRegister.</code><code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">node</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRegister.register" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/node</span></code> <br/> Register a new node in the system. If the node already exists, then a <code class="xref py py-exc docutils literal notranslate"><span class="pre">IdentifierNotUnique</span></code> exception MUST be returned.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.Node" title="v2_0.Types.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.Node</span></code></a> has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/node</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="Types.html#Types.Node" title="Types.Node"><em>Types.Node</em></a>) – An instance of <a class="reference internal" href="Types.html#Types.Node" title="Types.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Types.Node</span></code></a> that fully describes the node being registered. Note that some attributes will be set by the Coordinating Node.  Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The identifier of the new node entry if successful, otherwise an error is raised.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Types.html#Types.NodeReference" title="Types.NodeReference">Types.NodeReference</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – (errorCode=501, detailCode=4840)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – (errorCode=401, detailCode=4841)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4842)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – (errorCode=400, detailCode=4843)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.IdentifierNotUnique" title="Exceptions.IdentifierNotUnique"><strong>Exceptions.IdentifierNotUnique</strong></a> – (errorCode=409, detailCode=4844)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4845)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id43">
<p class="admonition-title">Todo</p>
<p>Example for CNRegister.register</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="CNRegister.updateNodeCapabilities">
<code class="sig-prename descclassname">CNRegister.</code><code class="sig-name descname">updateNodeCapabilities</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">session</span></em>, <em class="sig-param"><span class="n">nodeid</span></em>, <em class="sig-param"><span class="n">node</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CNRegister.updateNodeCapabilities" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/node/{nodeid}</span></code> <br/> For updating the capabilities of the specified node. Most information is replaced by information in the new node, however, the node identifier, nodeType, ping, syncrhonization.lastHarvested, and synchronization.lastCompleteHarvest are preserved from the existing entry.  Services in the old record not included in the new Node will be removed.</p>
<p>Successful completion of this operation is indicated by a HTTP response status code of 200.</p>
<p>Unsuccessful completion of this operation MUST be indicated by returning an appropriate exception.</p>
<p>v2.0: The structure of <a class="reference internal" href="Types2.html#v2_0.Types.Node" title="v2_0.Types.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">v2_0.Types.Node</span></code></a> has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.0, 2.0</p>
</dd>
<dt class="field-even">REST URL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/node/{nodeid}</span></code></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="Types.html#Types.Session" title="Types.Session"><em>Types.Session</em></a>) – Session information that contains the identity of the
calling user as retrieved from the X.509 certificate. Transmitted as part of
the SSL handshake process.</p></li>
<li><p><strong>nodeid</strong> (<a class="reference internal" href="Types.html#Types.NodeReference" title="Types.NodeReference"><em>Types.NodeReference</em></a>) – The identifier of the existing node entry being updated. Transmitted as part of the URL path and must be escaped accordingly.</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="Types.html#Types.Node" title="Types.Node"><em>Types.Node</em></a>) – An instance of :class`Types.Node` that contains the updated information.  Transmitted as an UTF-8 encoded XML structure for the respective type as defined in the DataONE types schema, as a <em>File part</em> of the MIME multipart/mixed message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if operation is successful</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotImplemented" title="Exceptions.NotImplemented"><strong>Exceptions.NotImplemented</strong></a> – The service is not implemented. (errorCode=501, detailCode=4820)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotAuthorized" title="Exceptions.NotAuthorized"><strong>Exceptions.NotAuthorized</strong></a> – The <a class="reference internal" href="../glossary.html#term-Subject"><span class="xref std std-term">Subject</span></a> does not have authority to modify the node registration information. (errorCode=401, detailCode=4821)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.ServiceFailure" title="Exceptions.ServiceFailure"><strong>Exceptions.ServiceFailure</strong></a> – (errorCode=500, detailCode=4822)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidRequest" title="Exceptions.InvalidRequest"><strong>Exceptions.InvalidRequest</strong></a> – The request was malformed. (errorCode=400, detailCode=4823)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.NotFound" title="Exceptions.NotFound"><strong>Exceptions.NotFound</strong></a> – The requested nodeid is not available in the registry. (errorCode=404, detailCode=4824)</p></li>
<li><p><a class="reference internal" href="Exceptions.html#Exceptions.InvalidToken" title="Exceptions.InvalidToken"><strong>Exceptions.InvalidToken</strong></a> – (errorCode=401, detailCode=4825)</p></li>
</ul>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="admonition-todo admonition" id="id44">
<p class="admonition-title">Todo</p>
<p>Example for CNRegister.updateNodeCapabilities</p>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <p class="logo"><a href="/">
      <img class="logo" src="../_static/dataone_logo.png" alt="Logo"/>
    </a></p>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Coordinating Node APIs</a><ul>
<li><a class="reference internal" href="#diagnostic-api">Diagnostic API</a></li>
<li><a class="reference internal" href="#core-api">Core API</a></li>
<li><a class="reference internal" href="#read-api">Read API</a></li>
<li><a class="reference internal" href="#view-api">View API</a></li>
<li><a class="reference internal" href="#authorization-api">Authorization API</a></li>
<li><a class="reference internal" href="#identity-api">Identity API</a></li>
<li><a class="reference internal" href="#replication-api">Replication API</a></li>
<li><a class="reference internal" href="#register-api">Register API</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation Overview</a><ul>
      <li>Previous: <a href="MN_APIs.html" title="previous chapter">Member Node APIs</a></li>
      <li>Next: <a href="Exceptions.html" title="next chapter">Exceptions Raised by MN and CN APIs</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/apis/CN_APIs.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      <div id="copyright">
      &copy; Copyright <a href="http://www.dataone.org">2009-2019, DataONE</a>.
        [ <a href="../_sources/apis/CN_APIs.txt"
               rel="nofollow">Page Source</a> |
          <a href='https://redmine.dataone.org/projects/d1/repository/changes/documents/Projects/cicore/architecture/api-documentation/source/apis/CN_APIs.txt'
            rel="nofollow">Revision History</a> ]&nbsp;&nbsp;
      </div>
      <div id="acknowledgement">
        <p>This material is based upon work supported by the National Science Foundation
          under Grant Numbers <a href="http://www.nsf.gov/awardsearch/showAward?AWD_ID=0830944">083094</a> and <a href="http://www.nsf.gov/awardsearch/showAward?AWD_ID=1430508">1430508</a>.</p>
        <p>Any opinions, findings, and conclusions or recommendations expressed in this
           material are those of the author(s) and do not necessarily reflect the views
           of the National Science Foundation.</p>
      </div>
    </div>
    <!--
    <hr />
     <div id="HCB_comment_box"><a href="http://www.htmlcommentbox.com">HTML Comment Box</a> is loading comments...</div>
     <link rel="stylesheet" type="text/css" href="_static/skin.css" />
     <script type="text/javascript" language="javascript" id="hcb">
     /*<! -*/
     (function()
     {s=document.createElement("script");
     s.setAttribute("type","text/javascript");
     s.setAttribute("src", "http://www.htmlcommentbox.com/jread?page="+escape((typeof hcb_user !== "undefined" && hcb_user.PAGE)||(""+window.location)).replace("+","%2B")+"&mod=%241%24wq1rdBcg%24Gg8J5iYSHJWwAJtlYu/yU."+"&opts=21407&num=10");
     if (typeof s!="undefined") document.getElementsByTagName("head")[0].appendChild(s);})();
      /* ->*/
     </script>
   -->
  </body>
</html>