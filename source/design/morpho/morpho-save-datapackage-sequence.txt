 @startuml images/morpho-delete-datapackage-sequence.png

  
   participant ": DataStoreController" as data_store_controller <<Morpho>>
   participant "dataPackage: DataPackage" as data_package <<D1_lib>>
   participant "abstractObject: AbstractObject" as abstract_object <<D1_lib>>
   participant ": DataStoreInterface" as data_store <<D1_lib>>
  
   activate data_store_controller
   data_store_controller -> data_package: save(dataPackage, []storeIds)
   activate data_package
   data_store_controller <- data_package: identifiers()
   
   loop iterate the store id list
   	loop iterate the identifier list
         data_store_controller -> data_package: identifier
         data_package -> abstract_object: dataPackage.get(identifier) creates the obstract object
         
         activate abstract_object
         
         abstract_object -> data_store: abstractObject.getData()
         activate data_store
         abstract_object -> data_store: abstractObject.getSystemMetadata()
         deactivate abstract_object     
         data_store -> data_store: create()/update()
        end
        data_package -> data_store: serialize() creates a string representation of the ore document
        data_package -> data_store: getSystemMetadata()
        data_store -> data_store: create()/update()
        deactivate data_store
	deactivate data_package
   end
   deactivate data_store_controller
  @enduml
