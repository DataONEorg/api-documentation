Content Discovery
=================




Metadata Attributes
-------------------

.. module:: SearchMetadata

This document describes the attributes pulled from :term:`science metadata`
documents that are used to assist discovery (i.e. search) of content in the DataONE system.

Data that exists within the DataONE system is always accompanied by science
metadata in one of the supported metadata schemes (e.g. Dublin Core, EML, or
another supported scheme) and expressed in one of the supported formats (e.g.
XML, RDF-XML). The science metadata is also replicated with the data (where
the Member Node supports the format and scheme) and additional copies are
replicated across the Coordinating Nodes. The science metadata is parsed by
the CNs to extract information to verify the content provides at least the
minimal metadata content and meets consistency requirements. Attributes
extracted from the science metadata are also used to support search
operations.


Searching content in DataONE involves the process of matching a user provided
value with some value extracted from the science metadata.

Values can be simple (e.g. string, integer, floating point, date) or compound
(e.g. spatial coordinate constructed from two floats - the latitude and
longitude and a string - the coordinate system identifier).


Expression in science metadata

Expression in extracted values that are indexed

Expression in a query


Required Query Expressions
~~~~~~~~~~~~~~~~~~~~~~~~~~

Search the authors of content.

Search the keywords of content


Search Element Types
~~~~~~~~~~~~~~~~~~~~

* Integer

* Float

* String

* DateTime

* SpatialFeature (use `Well Known Text`_ )

* Publication (A structured type, perhaps search by decomposing to elements)

* ScientificName (A structured type, perhaps search by decomposing to elements)


.. _Well Known Text: http://en.wikipedia.org/wiki/Well-known_text


Search Terms
------------

- author
- keyWord
- keyConcept
- spatialFeature
- namedLocation
- temporalCoverageStart
- temporalCoverageEnd
- any
- title
- objectFormat
- variableNme
- scientificName
- submitter
- related Object
- quality
- relatedOrganizations
- size
- replicaLocation
- identifier
- datePublished
- dateAddedToRepository
- dateSysMetadataModified



.. attribute:: author

  (String) Principle Investigator (PI) / Author

  Name authority service is desired for some control over names appearing in
  metadata For search, advantages to keep simple text representation Goal of
  gradual increase in specificity - Desireable if we can get "sort friendly"
  results -> recommend LAST, FIRST name - Mercury UI


.. attribute:: keyWord

  (String) Keyword (uncontrolled keywords)

  - Mercury enhances the kw list with e.g. gcmd keyword list
  - Mercury UI


.. attribute:: keyConcept

  Key concept -key concepts drawn from a set of ontologies Term Namespace

  - Controlled lists of terms available for several metadata standards
  - A topic being addressed by the semantics WG
  - Unlikely to be available in 2011
  - Giri has some keyword enhancement and mapping script (magic)
  - Mercury UI


.. attribute:: spatialFeature

  (SpatialFeature)
  - Spatial bounding box (largest bounding rectangle)
  - Spatial window (series of spatial envelopes representative of the spatial locations of where the data is collected from or relevant to)
  - Spatial features (points, bounding boxes, polygons)
  - Centroid
  - Bounding box
  - Polygon
  - (not largest extent)
  - (need to resolve the semantics of the bounding box search - e.g. if centroids are recorded but fall outside of bounding box search)
  - Bounding box with contains or overlaps 
  - can be supported by SOLR and Metacat searches
  - Mercury UI


.. attribute:: namedLocation

  (String) Named places Term Type Context (Columbus OH, Columbus GA) Namespace
  of gazetteer

  - free text search field
  - provide recommendations for representation (see Wieczorek's georeferencing document)
  - Mercury UI


.. attribute:: temporalCoverageStart

  (DateTime)

  - temporal extent
  - "jurassic" vs "date collected for jurassic specimen"
  - not publication date, not creation date
  - Applicability date (as opposed to collection date or publication date -- though searching on collection date is a secondary search).  Multiple dates possible:  Collection/observation date, coverage date, analysis date, publication date, metadata modification date (e.g. peat bog samples relevant to 50,000 - 10,000 BCE, collected in July 1980, re-analyzed in July 2008, published in January 2010, and metadata revised in June 2010).  In this example, earliestDate applies to 50,000 BCE.  
  - Mercury UI


.. attribute:: temporalCoverageEnd

  (DateTime) Temporal window
  Relative terms (e.g. terms from the Geologic time scale) need to be supported
  Date ranges
  Temporal coverage of the data set (e.g. searches - during, before, after)

  - same notes as above apply
  - Mercury UI


.. attribute:: any

  (String) Full text search / Text search on abstract - Mercury UI


.. attribute:: title

  (string) Title (2) - Mercury UI


.. attribute:: objectFormat

  (String) Type of data (format) (2)
  
  - Original data
  - Summarized versions
  - Method used for processing (to generate summary, or original data)
  - Resource type (spatial, models, observations, web service, ...)
  - search the system metadata value, but need to parse system metadata of related objects to determine the objectFormat(s) of the data.
  - Potential for mapping the values appearing the science metadata to the controlled terms available in the object format registry
  - label should be "content type"


.. attribute:: variableName

  (String) Scientific variables (from a controlled vocabulary) (1)

  - not in Dryad, optional in most/all
  - Mercury UI


.. attribute:: scientificName

  (String)  Biological taxonomic extents (1)

  - lots of opportunities for cleanup services from ITIS, EOL, etc
  - Mercury UI


.. attribute:: submitter

  (String) 

  - for either data or metadata
  - Principal that added the content to the MN
  - Needs to be translated from the subject to the individual's name


.. attribute:: relatedObject

  (String)  Related data (data sets, publications)

  - given a PID find everything that refers to it (deprecated, describes, derivedFrom...)
  - This should probably be specific to relation type - find all stuff derivedFrom PID


.. attribute:: quality

  (String, controlled vocabulary) Quality / level of curation


.. attribute:: relatedOrganizations

  (String) Organizations involved in study

  - low priority


.. attribute:: size

  (Integer, long) Size of data (bytes)

  - needed for drive, display, not necessary for UI search


.. attribute:: replicaLocation

  (String)  Number / location of replicas


.. attribute:: identifier

  (Types.IdentifierType) Identifier (PID)

  - Need to be able to find metadata records describing a dataset identified by PID
  - Find any science metadata that is or describes PID
  - Mercury UI


.. attribute:: datePublished

  - drawn from science metadata
  - is this the same as publication date concept in datacite - Yes
  - Mercury UI


.. attribute:: dateAddedToRepository

  - first submission to Member Node (drawn from science metadata if available, otherwise system metadata)


.. attribute:: dateSysMetadataModified

  (DateTime) available from sysmeta


.. attribute:: readPrincipal

  - element in permission index, used for shard query


.. attribute:: writePrincipal

  (Types.PrincipalType) Permissions on objects (e.g. available to read by user)

  - element in permission index, used for shard query



