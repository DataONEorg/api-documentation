Acknowledgements
================

This design specification for the DataONE infrastructure has been developed
through support of the National Science Foundation through the projects:

- NSF DBI `0753138`_, "INTEROP: Creation of an International Virtual Data
  Center for the Biodiversity, Ecological and Environmental Sciences"

- NSF OCI `0830944`_, "DataNet Full Proposal: DataNetONE (Observation Network
  For Earth)"

Many individuals have contributed to the development of these documents over a
number of years. Hence specific authorship information for particular
documents is difficult to determine. History for any portion of these
documents can be obtained by examining the subversion metadata using the *log*
command for general and the *blame* command for more specific change details.
If a copy of the document source has been checked out locally::

  svn log <<file name>>
  svn blame <<file name>>

or remotely::

  svn log https://repository.dataone.org/documents/Projects/cicore/architecture/api-documentation/<<file name>>
  svn blame https://repository.dataone.org/documents/Projects/cicore/architecture/api-documentation/<<file name>>

History for this file for example can be obtained by::

  svn blame source/about.txt

or remotely::

  svn blame https://repository.dataone.org/documents/Projects/cicore/architecture/api-documentation/source/about.txt  


About These Documents
=====================

These documents are generated using the excellent open source tools Sphinx_
for the overall document processing and generation, and PlantUML_ for the
various UML diagrams.


Editing Content
---------------

These documents are generated using Sphinx_ for the overall document
processing and generation, and PlantUML_ for UML diagrams.

All of these documents are formatted in reStructuredText_, formatted plain
text that is similar to the plain text formatting used in wiki pages.

Formatting guidelines for Sphinx are available at
http://sphinx.pocoo.org/contents.html

Portions of content, specifically all the individual function and exception
descriptions are maintained in an Excel spreadsheet (best edited using
OpenOffice Calc) since there are many cross references between that content,
having it generated from the spreadsheet simplifies maintenance.

In general, it is best to edit in UTF-8 using UNIXÂ® style new lines. Note that
white space is significant and is used primarily for determining which
formatting sections different blocks of text belong to.

.. note:: 

  White space and indentation is part of the formatting for reStructuredText.
  Please be consistent with the use of soft tabs (2 spaces per tab).


reStructuredText_ can be edited with any plain text editor. These documents
have been edited mainly with TextMate_ on OS X, which offers a preview feature
when the `reStructuredText bundle`_ is installed. Other editors that work well
for editing reStructuredText_ are jEdit and Komodo Edit. There are also
various plugins available for editors to assist with reStructuredText
formatting.

Follow the normal procedures for working with the subversion repository. After
checking in, your edits should appear in the `built out version`_ of the docs
within five minutes.

The convention for different levels of heading used in these documents is::

  ===  Level 1
  ---  Level 2
  ~~~  Level 3
  ...  Level 4


Building the Documentation
--------------------------

Sphinx_ is required to build the design documents from the source. A couple of
Sphinx extensions are included with the subversion checkout of these documents
(in ``tools/docutils/rst_directives``). Portions of Sphinx and the PlantUML_
extension have a dependency of Graphviz_, and this will need to be installed
in order to build the documents. If you want to build the pdf version of the
documents, then it will be necessary to install rst2pdf_ .

Setting up a Build Environment
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following general instructions apply for Ubuntu linux. Adjust the commands
as necessary for your OS (and please update these docs to help others in the
process). It is assumed that Python >= 2.6 and Java are available.

1. Install graphviz::

     $ sudo apt-get install graphviz

2. Install Sphinx (latest version)::

     $ sudo easy_install -U Sphinx

3. (Optional) Install rst2pdf::

     $ sudo easy_install -U rst2pdf

4. (Optional) Edits to the method descriptions in the excel spreadsheet
   (``MethodCrossReference.xls``) require regeneration of some portions of the
   documentation, which requires a couple of Python libraries (xlrd and xlwt)::

     $ sudo easy_install xlrd xlwt


5. Checkout a copy of the documentation from subversion::

     $ svn co https://repository.dataone.org/documents/Projects/cicore/architecture/api-documentation


6. Build the documents::

     $ cd api-documentation
     $ make html

   The documents will be available in ``build/html``, with ``index.html`` being the root document.

7. If changes are made to ``MethodCrosReference.xls``, then an additional make step is required::

     $ cd api-documentation
     $ make generate
     $ make html

8. To build a PDF version of the documents::

     $ make pdf

9. To build an ePub version of the documents::

     $ make epub



.. _Graphviz: http://www.graphviz.org/

.. _Sphinx: http://sphinx.pocoo.org/

.. _PlantUML: http://plantuml.sourceforge.net

.. _xlrd: http://pypi.python.org/pypi/xlrd

.. _setuptools: http://pypi.python.org/pypi/setuptools

.. _rst2pdf: http://code.google.com/p/rst2pdf/

.. _built out version: http://129.24.0.15/ArchitectureDocs/

.. _TextMate: http://macromates.com/

.. _reStructuredText bundle: http://svn.textmate.org/trunk/Bundles/reStructuredText.tmbundle/

.. _jEdit: http://www.jedit.org/

.. _reStructuredText: http://docutils.sourceforge.net/docs/user/rst/quickref.html

.. _0753138: http://nsf.gov/awardsearch/showAward.do?AwardNumber=0753138

.. _0830944: http://nsf.gov/awardsearch/showAward.do?AwardNumber=0830944

